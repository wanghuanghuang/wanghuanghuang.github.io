<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-附件上传" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/15/附件上传/" class="article-date">
  <time datetime="2018-11-15T06:57:50.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/15/附件上传/">附件上传</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##配置文件配置上传大小参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#修改上传文件大小设置，全局有效</span><br><span class="line">spring.http.multipart.maxFileSize=5Mb</span><br><span class="line">spring.http.multipart.maxRequestSize=5Mb</span><br><span class="line">#附件保存文件夹</span><br><span class="line">fileDir=E:/guizi</span><br></pre></td></tr></table></figure></p>
<p>##controller<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//上传附件文件类型白名单</span><br><span class="line">private final String[] FILE_WHITE = &#123;&quot;.zip,&quot;, &quot;.xls&quot;, &quot;.doc&quot;, &quot;.jpeg&quot;, &quot;.jpg&quot;, &quot;.png&quot;, &quot;.pdf&quot;, &quot;.docx&quot;, &quot;.xlsx&quot;&#125;;</span><br><span class="line">@AccessLogger(value = &quot;上传附件&quot;)</span><br><span class="line">@RequestMapping(value = &quot;/upload/save&quot;, method = RequestMethod.POST)</span><br><span class="line">@ApiOperation(value = &quot;上传附件&quot;, httpMethod = &quot;POST&quot;,</span><br><span class="line">        response = ResponseMessage.class, notes = &quot;上传附件&quot;)</span><br><span class="line">public ResponseMessage uploadFile(@RequestParam(value = &quot;file&quot;)  MultipartFile file,</span><br><span class="line">                                      @RequestParam(value = &quot;fileName&quot;) String fileName) &#123;</span><br><span class="line">    if (StringUtils.isEmpty(fileName)) &#123;</span><br><span class="line">            throw new BusinessException(&quot;文件名不能为空&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">    LOG.debug(&quot;文件名&quot; + fileName);</span><br><span class="line">    final String fileType = fileName.substring(fileName.lastIndexOf(&quot;.&quot;));</span><br><span class="line">    final List&lt;String&gt; list = Arrays.asList(FILE_WHITE);</span><br><span class="line">    if (file.isEmpty() || file.getSize() == 0) &#123;</span><br><span class="line">            throw new BusinessException(&quot;文件不能为空&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    if (!list.contains(fileType)) &#123;</span><br><span class="line">            throw new BusinessException(&quot;文件类型不在允许的范围内&quot;);</span><br><span class="line">     &#125;</span><br><span class="line">    final List&lt;Integer&gt; fileIds = new ArrayList&lt;&gt;(1);</span><br><span class="line">    fileIds.add(certificateService.fileSave(file, fileName));</span><br><span class="line">    return ResponseMessage.ok(fileIds.get(0));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##service<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@Value(&quot;$&#123;fileDir&#125;&quot;)</span><br><span class="line">private String fileDir;</span><br><span class="line">public Integer fileSave(MultipartFile file, String fileName) &#123;</span><br><span class="line">     try &#123;</span><br><span class="line">     //保存文件信息到数据库表</span><br><span class="line">        final RfidFile rfidFile = new RfidFile();</span><br><span class="line">        rfidFile.setFilename(fileName);</span><br><span class="line">        rfidFileMapper.insertSelective(rfidFile);</span><br><span class="line">        final byte[] bytes = file.getBytes();</span><br><span class="line">        final String fileType = fileName.substring(fileName.lastIndexOf(&quot;.&quot;));</span><br><span class="line">        final Path path = Paths.get(fileDir + File.separator + rfidFile.getId() + fileType);</span><br><span class="line">        LOG.debug(&quot;文件路径：&quot; + path.toString());</span><br><span class="line">        Files.write(path, bytes);</span><br><span class="line">        rfidFile.setPath(path.toString());</span><br><span class="line">        rfidFile.setUploadtime(new Date());</span><br><span class="line">        rfidFileMapper.updateByPrimaryKey(rfidFile);</span><br><span class="line">        return rfidFile.getId();</span><br><span class="line">     &#125; catch (Exception e) &#123;</span><br><span class="line">      LOG.error(&quot;文件保存异常：&quot;, e);</span><br><span class="line">      throw new BusinessException(&quot;文件保存出现异常&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/15/附件上传/" data-id="cjoi96yxx000k6whx232mcaxb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-邮件解析" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/15/邮件解析/" class="article-date">
  <time datetime="2018-11-15T03:22:07.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/15/邮件解析/">邮件解析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>解析协议为imap的邮件,解析确定主题，将接收到的邮件附件保存 并解析 进行操作</p>
<p>##配置文件 配置邮箱信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 邮箱配置</span><br><span class="line">mail.store.protocol=imap /</span><br><span class="line">mail.imap.host=imap.exmail.qq.com </span><br><span class="line">mail.username=xxxxx</span><br><span class="line">mail.password=xxxxx</span><br><span class="line"></span><br><span class="line"># 自定义邮件附件存储目录</span><br><span class="line">custom.mail.attachments.save.path = d:\\mailtmp\\</span><br><span class="line">custom.mail.attachments.save.prefix = GQHL</span><br><span class="line">custom.mail.match.key = \u5408\u683c\u8bc1\u91ca\u653e</span><br></pre></td></tr></table></figure></p>
<p>##将邮件解析逻辑抽取为工具类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br></pre></td><td class="code"><pre><span class="line">public class MailUtils &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 使用imap协议获取未读邮件数</span><br><span class="line">     * 测试IMAP协议</span><br><span class="line">     * @author hefan</span><br><span class="line">     * @date 2018/11/9 15:37</span><br><span class="line">     */</span><br><span class="line">    public static void readByImap() throws Exception &#123;</span><br><span class="line">        String user = &quot;xxxx&quot;;// 邮箱的用户名</span><br><span class="line">        String password = &quot;xxx&quot;; // 邮箱的密码</span><br><span class="line"></span><br><span class="line">        Properties prop = System.getProperties();</span><br><span class="line">        prop.put(&quot;mail.store.protocol&quot;, &quot;imap&quot;);</span><br><span class="line">        prop.put(&quot;mail.imap.host&quot;, &quot;imap.exmail.qq.com&quot;);</span><br><span class="line"></span><br><span class="line">        Session session = Session.getInstance(prop);</span><br><span class="line"></span><br><span class="line">        int total = 0;</span><br><span class="line">        IMAPStore store = (IMAPStore) session.getStore(&quot;imap&quot;); // 使用imap会话机制，连接服务器</span><br><span class="line">        store.connect(user, password);</span><br><span class="line">        IMAPFolder folder = (IMAPFolder) store.getFolder(&quot;INBOX&quot;); // 收件箱</span><br><span class="line">        folder.open(Folder.READ_WRITE);</span><br><span class="line">        // 获取总邮件数</span><br><span class="line">        total = folder.getMessageCount();</span><br><span class="line">        System.out.println(&quot;-----------------共有邮件：&quot; + total + &quot; 封--------------&quot;);</span><br><span class="line">        // 得到收件箱文件夹信息，获取邮件列表</span><br><span class="line">        System.out.println(&quot;未读邮件数：&quot; + folder.getUnreadMessageCount());</span><br><span class="line">        Message[] messages = folder.getMessages();</span><br><span class="line">        int messageNumber = 0;</span><br><span class="line">        for (Message message : messages) &#123;</span><br><span class="line">            System.out.println(&quot;发送时间：&quot; + message.getSentDate());</span><br><span class="line">            System.out.println(&quot;主题：&quot; + message.getSubject());</span><br><span class="line">            System.out.println(&quot;内容：&quot; + message.getContent());</span><br><span class="line">            Flags flags = message.getFlags();</span><br><span class="line">            if (flags.contains(Flags.Flag.SEEN))</span><br><span class="line">                System.out.println(&quot;这是一封已读邮件&quot;);</span><br><span class="line">            else &#123;</span><br><span class="line">                System.out.println(&quot;未读邮件&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out</span><br><span class="line">                    .println(&quot;========================================================&quot;);</span><br><span class="line">            System.out</span><br><span class="line">                    .println(&quot;========================================================&quot;);</span><br><span class="line">            boolean isContainerAttachment = isContainAttachment(message);</span><br><span class="line">            System.out.println(&quot;邮件大小：&quot; + message.getSize() / 1024 + &quot;kb&quot;);</span><br><span class="line">            System.out.println(&quot;是否包含附件：&quot; + isContainerAttachment);</span><br><span class="line">            if (isContainerAttachment) &#123;</span><br><span class="line">                saveAttachment(message, &quot;d:\\mailtmp\\&quot; + message.getSubject() + &quot;_&quot;); //保存附件</span><br><span class="line">            &#125;</span><br><span class="line">            //每封邮件都有一个MessageNumber，可以通过邮件的MessageNumber在收件箱里面取得该邮件</span><br><span class="line">            messageNumber = message.getMessageNumber();</span><br><span class="line">        &#125;</span><br><span class="line">        Message message = folder.getMessage(messageNumber);</span><br><span class="line">        System.out.println(message.getContent() + message.getContentType());</span><br><span class="line">        // 释放资源</span><br><span class="line">        if (folder != null) &#123;</span><br><span class="line">            folder.close(true);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (store != null) &#123;</span><br><span class="line">            store.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * pop3接收邮件</span><br><span class="line">     * 测试pop3协议</span><br><span class="line">     * @author hefan</span><br><span class="line">     * @date 2018/11/10 14:18</span><br><span class="line">     */</span><br><span class="line">    public static void readByPop3() throws Exception &#123;</span><br><span class="line">        Properties props = new Properties();</span><br><span class="line">        props.setProperty(&quot;mail.store.protocol&quot;, &quot;pop3&quot;);       // 协议</span><br><span class="line">        props.setProperty(&quot;mail.pop3.port&quot;, &quot;110&quot;);             // 端口</span><br><span class="line">        props.setProperty(&quot;mail.pop3.host&quot;, &quot;pop.163.com&quot;);    // pop3服务器</span><br><span class="line"></span><br><span class="line">        // 创建Session实例对象</span><br><span class="line">        Session session = Session.getInstance(props);</span><br><span class="line">        Store store = session.getStore(&quot;pop3&quot;);</span><br><span class="line">        store.connect(&quot;xxxxx&quot;, &quot;xxxxx&quot;);</span><br><span class="line"></span><br><span class="line">        // 获得收件箱</span><br><span class="line">        IMAPFolder folder = (IMAPFolder) store.getFolder(&quot;INBOX&quot;); // 收件箱</span><br><span class="line">        /* Folder.READ_ONLY：只读权限</span><br><span class="line">         * Folder.READ_WRITE：可读可写（可以修改邮件的状态）</span><br><span class="line">         */</span><br><span class="line">        folder.open(Folder.READ_WRITE); //打开收件箱</span><br><span class="line"></span><br><span class="line">        // 由于POP3协议无法获知邮件的状态,所以getUnreadMessageCount得到的是收件箱的邮件总数</span><br><span class="line">        System.out.println(&quot;未读邮件数: &quot; + folder.getUnreadMessageCount());</span><br><span class="line"></span><br><span class="line">        // 由于POP3协议无法获知邮件的状态,所以下面得到的结果始终都是为0</span><br><span class="line">        System.out.println(&quot;删除邮件数: &quot; + folder.getDeletedMessageCount());</span><br><span class="line">        System.out.println(&quot;新邮件: &quot; + folder.getNewMessageCount());</span><br><span class="line"></span><br><span class="line">        // 获得收件箱中的邮件总数</span><br><span class="line">        System.out.println(&quot;邮件总数: &quot; + folder.getMessageCount());</span><br><span class="line"></span><br><span class="line">        // 得到收件箱中的所有邮件,并解析</span><br><span class="line">        Message[] messages = folder.getMessages();</span><br><span class="line">        parseMessage(messages);</span><br><span class="line"></span><br><span class="line">        //释放资源</span><br><span class="line">        folder.close(true);</span><br><span class="line">        store.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 解析邮件</span><br><span class="line">     *</span><br><span class="line">     * @param messages 要解析的邮件列表</span><br><span class="line">     */</span><br><span class="line">    public static void parseMessage(Message... messages) throws MessagingException, IOException &#123;</span><br><span class="line">        if (!(messages == null || messages.length &lt; 1)) &#123;</span><br><span class="line">            //throw new MessagingException(&quot;未找到要解析的邮件!&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // 解析所有邮件</span><br><span class="line">        for (int i = 0, count = messages.length; i &lt; count; i++) &#123;</span><br><span class="line">            MimeMessage msg = (MimeMessage) messages[i];</span><br><span class="line">            System.out.println(&quot;------------------解析第&quot; + msg.getMessageNumber() + &quot;封邮件-------------------- &quot;);</span><br><span class="line">            System.out.println(&quot;主题: &quot; + getSubject(msg));</span><br><span class="line">            System.out.println(&quot;发件人: &quot; + getFrom(msg));</span><br><span class="line">            System.out.println(&quot;收件人：&quot; + getReceiveAddress(msg, null));</span><br><span class="line">            System.out.println(&quot;发送时间：&quot; + getSentDate(msg, null));</span><br><span class="line">            System.out.println(&quot;是否已读：&quot; + isSeen(msg));</span><br><span class="line">            System.out.println(&quot;邮件优先级：&quot; + getPriority(msg));</span><br><span class="line">            System.out.println(&quot;是否需要回执：&quot; + isReplySign(msg));</span><br><span class="line">            System.out.println(&quot;邮件大小：&quot; + msg.getSize() * 1024 + &quot;kb&quot;);</span><br><span class="line">            boolean isContainerAttachment = isContainAttachment(msg);</span><br><span class="line">            System.out.println(&quot;是否包含附件：&quot; + isContainerAttachment);</span><br><span class="line">            if (isContainerAttachment) &#123;</span><br><span class="line">                saveAttachment(msg, &quot;d:\\mailtmp\\&quot; + msg.getSubject() + &quot;_&quot;); //保存附件</span><br><span class="line">            &#125;</span><br><span class="line">            StringBuffer content = new StringBuffer(30);</span><br><span class="line">            getMailTextContent(msg, content);</span><br><span class="line">            System.out.println(&quot;邮件正文：&quot; + (content.length() &gt; 100 ? content.substring(0, 100) + &quot;...&quot; : content));</span><br><span class="line">            System.out.println(&quot;------------------第&quot; + msg.getMessageNumber() + &quot;封邮件解析结束-------------------- &quot;);</span><br><span class="line">            //设置删除标记</span><br><span class="line">            msg.setFlag(Flags.Flag.DELETED, true);</span><br><span class="line">            System.out.println(&quot;------------------第&quot; + msg.getMessageNumber() + &quot;封邮件标记删除-------------------- &quot;);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获得邮件主题</span><br><span class="line">     *</span><br><span class="line">     * @param msg 邮件内容</span><br><span class="line">     * @return 解码后的邮件主题</span><br><span class="line">     */</span><br><span class="line">    public static String getSubject(MimeMessage msg) throws UnsupportedEncodingException, MessagingException &#123;</span><br><span class="line">        return MimeUtility.decodeText(msg.getSubject());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获得邮件发件人</span><br><span class="line">     *</span><br><span class="line">     * @param msg 邮件内容</span><br><span class="line">     * @return 姓名 &lt;Email地址&gt;</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     * @throws UnsupportedEncodingException</span><br><span class="line">     */</span><br><span class="line">    public static String getFrom(MimeMessage msg) throws MessagingException, UnsupportedEncodingException &#123;</span><br><span class="line">        String from = &quot;&quot;;</span><br><span class="line">        Address[] froms = msg.getFrom();</span><br><span class="line">        if (froms.length &lt; 1) &#123;</span><br><span class="line">            throw new MessagingException(&quot;没有发件人!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        InternetAddress address = (InternetAddress) froms[0];</span><br><span class="line">        String person = address.getPersonal();</span><br><span class="line">        if (person != null) &#123;</span><br><span class="line">            person = MimeUtility.decodeText(person) + &quot; &quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            person = &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        from = person + &quot;&lt;&quot; + address.getAddress() + &quot;&gt;&quot;;</span><br><span class="line">        return from;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据收件人类型，获取邮件收件人、抄送和密送地址。如果收件人类型为空，则获得所有的收件人</span><br><span class="line">     * &lt;p&gt;Message.RecipientType.TO  收件人&lt;/p&gt;</span><br><span class="line">     * &lt;p&gt;Message.RecipientType.CC  抄送&lt;/p&gt;</span><br><span class="line">     * &lt;p&gt;Message.RecipientType.BCC 密送&lt;/p&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param msg  邮件内容</span><br><span class="line">     * @param type 收件人类型</span><br><span class="line">     * @return 收件人1 &lt;邮件地址1&gt;, 收件人2 &lt;邮件地址2&gt;, ...</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     */</span><br><span class="line">    public static String getReceiveAddress(MimeMessage msg, Message.RecipientType type) throws MessagingException &#123;</span><br><span class="line">        StringBuffer receiveAddress = new StringBuffer();</span><br><span class="line">        Address[] addresss = null;</span><br><span class="line">        if (type == null) &#123;</span><br><span class="line">            addresss = msg.getAllRecipients();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            addresss = msg.getRecipients(type);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (addresss == null || addresss.length &lt; 1)</span><br><span class="line">            throw new MessagingException(&quot;没有收件人!&quot;);</span><br><span class="line">        for (Address address : addresss) &#123;</span><br><span class="line">            InternetAddress internetAddress = (InternetAddress) address;</span><br><span class="line">            receiveAddress.append(internetAddress.toUnicodeString()).append(&quot;,&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        receiveAddress.deleteCharAt(receiveAddress.length() - 1); //删除最后一个逗号</span><br><span class="line"></span><br><span class="line">        return receiveAddress.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获得邮件发送时间</span><br><span class="line">     *</span><br><span class="line">     * @param msg 邮件内容</span><br><span class="line">     * @return yyyy年mm月dd日 星期X HH:mm:ss</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     */</span><br><span class="line">    public static String getSentDate(MimeMessage msg, String pattern) throws MessagingException &#123;</span><br><span class="line">        Date receivedDate = msg.getSentDate();</span><br><span class="line">        if (receivedDate == null) &#123;</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        if (pattern == null || &quot;&quot;.equals(pattern)) &#123;</span><br><span class="line">            pattern = &quot;yyyy年MM月dd日 E HH:mm:ss &quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        return new SimpleDateFormat(pattern).format(receivedDate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 判断邮件中是否包含附件</span><br><span class="line">     *</span><br><span class="line">     * @param part 邮件内容</span><br><span class="line">     * @return 邮件中存在附件返回true，不存在返回false</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public static boolean isContainAttachment(Part part) throws MessagingException, IOException &#123;</span><br><span class="line">        boolean flag = false;</span><br><span class="line">        if (part.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">            MimeMultipart multipart = (MimeMultipart) part.getContent();</span><br><span class="line">            int partCount = multipart.getCount();</span><br><span class="line">            for (int i = 0; i &lt; partCount; i++) &#123;</span><br><span class="line">                BodyPart bodyPart = multipart.getBodyPart(i);</span><br><span class="line">                String disp = bodyPart.getDisposition();</span><br><span class="line">                if (disp != null &amp;&amp; (disp.equalsIgnoreCase(Part.ATTACHMENT) || disp.equalsIgnoreCase(Part.INLINE))) &#123;</span><br><span class="line">                    flag = true;</span><br><span class="line">                &#125; else if (bodyPart.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">                    flag = isContainAttachment(bodyPart);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    String contentType = bodyPart.getContentType();</span><br><span class="line">                    if (contentType.indexOf(&quot;application&quot;) != -1) &#123;</span><br><span class="line">                        flag = true;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    if (contentType.indexOf(&quot;name&quot;) != -1) &#123;</span><br><span class="line">                        flag = true;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (flag) &#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (part.isMimeType(&quot;message/rfc822&quot;)) &#123;</span><br><span class="line">            flag = isContainAttachment((Part) part.getContent());</span><br><span class="line">        &#125;</span><br><span class="line">        return flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 判断邮件是否已读</span><br><span class="line">     *</span><br><span class="line">     * @param msg 邮件内容</span><br><span class="line">     * @return 如果邮件已读返回true, 否则返回false</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     */</span><br><span class="line">    public static boolean isSeen(MimeMessage msg) throws MessagingException &#123;</span><br><span class="line">        return msg.getFlags().contains(Flags.Flag.SEEN);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 判断邮件是否需要阅读回执</span><br><span class="line">     *</span><br><span class="line">     * @param msg 邮件内容</span><br><span class="line">     * @return 需要回执返回true, 否则返回false</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     */</span><br><span class="line">    public static boolean isReplySign(MimeMessage msg) throws MessagingException &#123;</span><br><span class="line">        boolean replySign = false;</span><br><span class="line">        String[] headers = msg.getHeader(&quot;Disposition-Notification-To&quot;);</span><br><span class="line">        if (headers != null) &#123;</span><br><span class="line">            replySign = true;</span><br><span class="line">        &#125;</span><br><span class="line">        return replySign;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获得邮件的优先级</span><br><span class="line">     *</span><br><span class="line">     * @param msg 邮件内容</span><br><span class="line">     * @return 1(High):紧急  3:普通(Normal)  5:低(Low)</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     */</span><br><span class="line">    public static String getPriority(MimeMessage msg) throws MessagingException &#123;</span><br><span class="line">        String priority = &quot;普通&quot;;</span><br><span class="line">        String[] headers = msg.getHeader(&quot;X-Priority&quot;);</span><br><span class="line">        if (headers != null) &#123;</span><br><span class="line">            String headerPriority = headers[0];</span><br><span class="line">            if (headerPriority.indexOf(&quot;1&quot;) != -1 || headerPriority.indexOf(&quot;High&quot;) != -1) &#123;</span><br><span class="line">                priority = &quot;紧急&quot;;</span><br><span class="line">            &#125; else if (headerPriority.indexOf(&quot;5&quot;) != -1 || headerPriority.indexOf(&quot;Low&quot;) != -1) &#123;</span><br><span class="line">                priority = &quot;低&quot;;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                priority = &quot;普通&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return priority;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获得邮件文本内容</span><br><span class="line">     *</span><br><span class="line">     * @param part    邮件体</span><br><span class="line">     * @param content 存储邮件文本内容的字符串</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public static void getMailTextContent(Part part, StringBuffer content) throws MessagingException, IOException &#123;</span><br><span class="line">        //如果是文本类型的附件，通过getContent方法可以取到文本内容，但这不是我们需要的结果，所以在这里要做判断</span><br><span class="line">        boolean isContainTextAttach = part.getContentType().indexOf(&quot;name&quot;) &gt; 0;</span><br><span class="line">        if (part.isMimeType(&quot;text/*&quot;) &amp;&amp; !isContainTextAttach) &#123;</span><br><span class="line">            content.append(part.getContent().toString());</span><br><span class="line">        &#125; else if (part.isMimeType(&quot;message/rfc822&quot;)) &#123;</span><br><span class="line">            getMailTextContent((Part) part.getContent(), content);</span><br><span class="line">        &#125; else if (part.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">            Multipart multipart = (Multipart) part.getContent();</span><br><span class="line">            int partCount = multipart.getCount();</span><br><span class="line">            for (int i = 0; i &lt; partCount; i++) &#123;</span><br><span class="line">                BodyPart bodyPart = multipart.getBodyPart(i);</span><br><span class="line">                getMailTextContent(bodyPart, content);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//    @Deprecated</span><br><span class="line">//    public static AttachmentDetail saveAttachment(Part part, String destDir, String matchKey,</span><br><span class="line">//                                                  String savePrefix, Class clazz) throws Exception &#123;</span><br><span class="line">//        AttachmentDetail detail = null;</span><br><span class="line">//        if (part.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">//            //复杂体邮件</span><br><span class="line">//            Multipart multipart = (Multipart) part.getContent();</span><br><span class="line">//            //复杂体邮件包含多个邮件体</span><br><span class="line">//            int partCount = multipart.getCount();</span><br><span class="line">//            for (int i = 0; i &lt; partCount; i++) &#123;</span><br><span class="line">//                //获得复杂体邮件中其中一个邮件体</span><br><span class="line">//                BodyPart bodyPart = multipart.getBodyPart(i);</span><br><span class="line">//                //某一个邮件体也有可能是由多个邮件体组成的复杂体</span><br><span class="line">//                String disp = bodyPart.getDisposition();</span><br><span class="line">//                if (disp != null &amp;&amp; (disp.equalsIgnoreCase(Part.ATTACHMENT)</span><br><span class="line">//                        || disp.equalsIgnoreCase(Part.INLINE))) &#123;</span><br><span class="line">//                    // 先解析文件后保存excel</span><br><span class="line">//                    List data = ImportExcel.getInstance().</span><br><span class="line">//                            getDataByExcelModel(bodyPart.getInputStream(),</span><br><span class="line">//                                    decodeText(bodyPart.getFileName()), clazz);</span><br><span class="line">//                    String saveName = generatorName(savePrefix);</span><br><span class="line">//                    saveFile(bodyPart.getInputStream(), destDir, generatorName(saveName));</span><br><span class="line">//                    return detail = new AttachmentDetail(decodeText(bodyPart.getFileName()), saveName, data);</span><br><span class="line">//                &#125; else if (bodyPart.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">//                    saveAttachment(bodyPart, destDir,</span><br><span class="line">//                            matchKey, savePrefix, clazz);</span><br><span class="line">//                &#125; else &#123;</span><br><span class="line">//                    String contentType = bodyPart.getContentType();</span><br><span class="line">//                    if (contentType.indexOf(&quot;name&quot;) != -1</span><br><span class="line">//                            || contentType.indexOf(&quot;application&quot;) != -1) &#123;</span><br><span class="line">//                        // 先解析文件后保存excel</span><br><span class="line">//                        List data = ImportExcel.getInstance().</span><br><span class="line">//                                getDataByExcelModel(bodyPart.getInputStream(),</span><br><span class="line">//                                        decodeText(bodyPart.getFileName()), clazz);</span><br><span class="line">//                        String saveName = generatorName(savePrefix);</span><br><span class="line">//                        saveFile(bodyPart.getInputStream(), destDir, generatorName(saveName));</span><br><span class="line">//                        return detail = new AttachmentDetail(decodeText(bodyPart.getFileName()), saveName, data);</span><br><span class="line">//                    &#125;</span><br><span class="line">//                &#125;</span><br><span class="line">//            &#125;</span><br><span class="line">//        &#125; else if (part.isMimeType(&quot;message/rfc822&quot;)) &#123;</span><br><span class="line">//            saveAttachment((Part) part.getContent(), destDir,</span><br><span class="line">//                    matchKey, savePrefix, clazz);</span><br><span class="line">//        &#125;</span><br><span class="line">//        return detail;</span><br><span class="line">//    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 保存附件</span><br><span class="line">     *</span><br><span class="line">     * @param part       邮件中多个组合体中的其中一个组合体</span><br><span class="line">     * @param destDir    附件保存目录</span><br><span class="line">     * @param matchKey   匹配关键字</span><br><span class="line">     * @param savePrefix 保存文件名前缀</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public static AttachmentDetail saveAttachment(Part part, String destDir, String matchKey,</span><br><span class="line">                                                  String savePrefix, Class clazz) throws Exception &#123;</span><br><span class="line">        if (part.isMimeType(&quot;message/rfc822&quot;)) &#123;</span><br><span class="line">            saveAttachment((Part) part.getContent(),</span><br><span class="line">                    destDir, matchKey, savePrefix, clazz);</span><br><span class="line">        &#125;</span><br><span class="line">        // 复杂体邮件</span><br><span class="line">        Multipart multipart = (Multipart) part.getContent();</span><br><span class="line">        // 复杂体邮件包含多个邮件体</span><br><span class="line">        InputStream is = null;</span><br><span class="line">        String sourceName = null;</span><br><span class="line">        String disp = null;</span><br><span class="line">        BodyPart bodyPart = null;</span><br><span class="line">        // 若有多个附件，仅筛选符合条件的第一个</span><br><span class="line">        // 判断是否含有附件格式为excel，并且名称满足条件要求</span><br><span class="line">        for (int i = 0; i &lt; multipart.getCount(); i++) &#123;</span><br><span class="line">            // 获得复杂体邮件中其中一个邮件体</span><br><span class="line">            bodyPart = multipart.getBodyPart(i);</span><br><span class="line">            if (bodyPart.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">                saveAttachment(bodyPart, destDir,</span><br><span class="line">                        matchKey, savePrefix, clazz);</span><br><span class="line">            &#125;</span><br><span class="line">            // 某一个邮件体也有可能是由多个邮件体组成的复杂体</span><br><span class="line">            disp = bodyPart.getDisposition();</span><br><span class="line">            sourceName = decodeText(bodyPart.getFileName());</span><br><span class="line">            // 若附件格式不为excel，或者文件名不是指定格式，则查找一下</span><br><span class="line">            if(StringUtils.isBlank(sourceName)</span><br><span class="line">                    || !sourceName.contains(matchKey)</span><br><span class="line">                    || ImportExcel.isNotExcelFile(sourceName))&#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            is = bodyPart.getInputStream();</span><br><span class="line">            if (StringUtils.isBlank(disp) || (!Part.ATTACHMENT.equalsIgnoreCase(disp)</span><br><span class="line">                    &amp;&amp; !Part.INLINE.equalsIgnoreCase(disp)))&#123;</span><br><span class="line">                String contentType = bodyPart.getContentType();</span><br><span class="line">                if (contentType.indexOf(&quot;name&quot;) == -1</span><br><span class="line">                        &amp;&amp; contentType.indexOf(&quot;application&quot;) == -1) &#123;</span><br><span class="line">                    continue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            // 先解析文件后保存excel</span><br><span class="line">            List data = ImportExcel.getInstance().</span><br><span class="line">                    getDataByExcelModel(is, sourceName, clazz);</span><br><span class="line">            String saveName = generatorName(savePrefix);</span><br><span class="line">            saveFile(is, destDir, generatorName(saveName));</span><br><span class="line">            return new AttachmentDetail(sourceName, saveName, data);</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 上传附件生成唯一名称</span><br><span class="line">     * 生成规则，前缀 + msgNumber + yyyyMMddHHmmss</span><br><span class="line">     * @date 2018/11/10 15:51</span><br><span class="line">     */</span><br><span class="line">    public static String generatorName(String filePrefix) &#123;</span><br><span class="line">        String dateStr = DateTimeUtils.format(new Date(),</span><br><span class="line">                DateTimeUtils.YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SIMPLE);</span><br><span class="line">        return filePrefix + dateStr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 保存附件</span><br><span class="line">     *</span><br><span class="line">     * @param part    邮件中多个组合体中的其中一个组合体</span><br><span class="line">     * @param destDir 附件保存目录</span><br><span class="line">     * @throws MessagingException</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public static void saveAttachment(Part part, String destDir)</span><br><span class="line">            throws MessagingException, IOException &#123;</span><br><span class="line">        if (part.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">            //复杂体邮件</span><br><span class="line">            Multipart multipart = (Multipart) part.getContent();</span><br><span class="line">            //复杂体邮件包含多个邮件体</span><br><span class="line">            int partCount = multipart.getCount();</span><br><span class="line">            for (int i = 0; i &lt; partCount; i++) &#123;</span><br><span class="line">                //获得复杂体邮件中其中一个邮件体</span><br><span class="line">                BodyPart bodyPart = multipart.getBodyPart(i);</span><br><span class="line">                //某一个邮件体也有可能是由多个邮件体组成的复杂体</span><br><span class="line">                String disp = bodyPart.getDisposition();</span><br><span class="line">                if (disp != null &amp;&amp; (disp.equalsIgnoreCase(Part.ATTACHMENT)</span><br><span class="line">                        || disp.equalsIgnoreCase(Part.INLINE))) &#123;</span><br><span class="line">                    //TODO 修改存储文件名</span><br><span class="line">                    saveFile(bodyPart.getInputStream(), destDir,</span><br><span class="line">                            decodeText(bodyPart.getFileName()));</span><br><span class="line">                &#125; else if (bodyPart.isMimeType(&quot;multipart/*&quot;)) &#123;</span><br><span class="line">                    saveAttachment(bodyPart, destDir);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    String contentType = bodyPart.getContentType();</span><br><span class="line">                    if (contentType.indexOf(&quot;name&quot;) != -1</span><br><span class="line">                            || contentType.indexOf(&quot;application&quot;) != -1) &#123;</span><br><span class="line">                        saveFile(bodyPart.getInputStream(), destDir,</span><br><span class="line">                                decodeText(bodyPart.getFileName()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (part.isMimeType(&quot;message/rfc822&quot;)) &#123;</span><br><span class="line">            saveAttachment((Part) part.getContent(), destDir);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 读取输入流中的数据保存至指定目录</span><br><span class="line">     *</span><br><span class="line">     * @param is       输入流</span><br><span class="line">     * @param fileName 文件名</span><br><span class="line">     * @param destDir  文件存储目录</span><br><span class="line">     * @throws FileNotFoundException</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    private static void saveFile(InputStream is, String destDir, String fileName)</span><br><span class="line">            throws IOException &#123;</span><br><span class="line">        BufferedInputStream bis = new BufferedInputStream(is);</span><br><span class="line">        BufferedOutputStream bos = new BufferedOutputStream(</span><br><span class="line">                new FileOutputStream(new File(destDir + fileName)));</span><br><span class="line">        int len = -1;</span><br><span class="line">        while ((len = bis.read()) != -1) &#123;</span><br><span class="line">            bos.write(len);</span><br><span class="line">            bos.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        bos.close();</span><br><span class="line">        bis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 文本解码</span><br><span class="line">     *</span><br><span class="line">     * @param encodeText 解码MimeUtility.encodeText(String text)方法编码后的文本</span><br><span class="line">     * @return 解码后的文本</span><br><span class="line">     * @throws UnsupportedEncodingException</span><br><span class="line">     */</span><br><span class="line">    public static String decodeText(String encodeText) throws UnsupportedEncodingException &#123;</span><br><span class="line">        if (encodeText == null || &quot;&quot;.equals(encodeText)) &#123;</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return MimeUtility.decodeText(encodeText);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##邮箱监控工具<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class MailMonitor &#123;</span><br><span class="line"></span><br><span class="line">    public static final Logger logger = LoggerFactory.getLogger(MailMonitor.class);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 邮件配置文件</span><br><span class="line">     */</span><br><span class="line">    private Properties EMAIL_PROP = System.getProperties();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 收件箱名</span><br><span class="line">     * @date 2018/11/9 13:57</span><br><span class="line">     */</span><br><span class="line">    private static final String FOLDER_NAME = &quot;INBOX&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 协议</span><br><span class="line">     */</span><br><span class="line">    @Value(&quot;$&#123;mail.store.protocol&#125;&quot;)</span><br><span class="line">    private String protocol;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 服务器地址</span><br><span class="line">     */</span><br><span class="line">    @Value(&quot;$&#123;mail.imap.host&#125;&quot;)</span><br><span class="line">    private String host;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 用户名</span><br><span class="line">     */</span><br><span class="line">    @Value(&quot;$&#123;mail.username&#125;&quot;)</span><br><span class="line">    private String username;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 密码</span><br><span class="line">     */</span><br><span class="line">    @Value(&quot;$&#123;mail.password&#125;&quot;)</span><br><span class="line">    private String password;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * session</span><br><span class="line">     * @date 2018/11/9 10:47</span><br><span class="line">     */</span><br><span class="line">    private Session session;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * store</span><br><span class="line">     * @date 2018/11/9 10:47</span><br><span class="line">     */</span><br><span class="line">    private IMAPStore store;</span><br><span class="line"></span><br><span class="line">    public void initProp()&#123;</span><br><span class="line">        EMAIL_PROP.put(&quot;mail.store.protocol&quot;, protocol);</span><br><span class="line">        EMAIL_PROP.put(&quot;mail.imap.host&quot;, host);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 使用imap会话机制，连接服务器</span><br><span class="line">     * @date 2018/11/9 10:51</span><br><span class="line">     */</span><br><span class="line">    @PostConstruct</span><br><span class="line">    public void init() throws MessagingException &#123;</span><br><span class="line">        initProp();</span><br><span class="line">        session = Session.getInstance(EMAIL_PROP);</span><br><span class="line">        store = (IMAPStore) session.getStore(protocol);</span><br><span class="line">        store.connect(username, password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取并开启folder</span><br><span class="line">     * @date 2018/11/9 15:17</span><br><span class="line">     */</span><br><span class="line">    public IMAPFolder getAndOpen() throws MessagingException &#123;</span><br><span class="line">        IMAPFolder folder = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            folder = (IMAPFolder) store.getFolder(FOLDER_NAME);</span><br><span class="line">            folder.open(Folder.READ_WRITE);</span><br><span class="line">        &#125; catch (MessagingException e) &#123;</span><br><span class="line">            logger.error(&quot;获取开启收件箱异常！&quot;, e);</span><br><span class="line">            throw e;</span><br><span class="line">        &#125;</span><br><span class="line">        return folder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 接收邮件数据</span><br><span class="line">     * @date 2018/11/9 15:16</span><br><span class="line">     */</span><br><span class="line">    public Message[] receive() throws MessagingException &#123;</span><br><span class="line">        IMAPFolder folder = getAndOpen();</span><br><span class="line">        Message[] message = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 获取总邮件数</span><br><span class="line">            int total = folder.getMessageCount();</span><br><span class="line">            logger.info(&quot;-----------------共有邮件：&quot; + total + &quot; 封--------------&quot;);</span><br><span class="line">            logger.info(&quot;-----------------未读邮件数：&quot; + folder.getUnreadMessageCount() + &quot;--------------&quot;);</span><br><span class="line">            message = folder.getMessages();</span><br><span class="line">        &#125; catch (Exception e)&#123;</span><br><span class="line">            logger.error(&quot;接收message异常！&quot;, e);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if(null != folder)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    folder.close(true);</span><br><span class="line">                &#125; catch (MessagingException e) &#123;</span><br><span class="line">                    logger.error(&quot;关闭folder异常！&quot;, e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据消息数获取邮件</span><br><span class="line">     * @date 2018/11/9 15:22</span><br><span class="line">     * @param msgNumber</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public Message get(Integer msgNumber) &#123;</span><br><span class="line">        Message message = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            getAndOpen().getMessage(msgNumber);</span><br><span class="line">        &#125; catch (MessagingException e)&#123;</span><br><span class="line">            logger.error(&quot;MessagingException!&quot;, e);</span><br><span class="line">        &#125;</span><br><span class="line">        return message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PreDestroy</span><br><span class="line">    public void shutdown() &#123;</span><br><span class="line">        logger.info(&quot;Stopping store!&quot;);</span><br><span class="line">        try &#123;</span><br><span class="line">            store.close();</span><br><span class="line">        &#125; catch (MessagingException e) &#123;</span><br><span class="line">            logger.error(&quot;Stop Store error!&quot;, e);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            store = null;</span><br><span class="line">            session = null;</span><br><span class="line">        &#125;</span><br><span class="line">        logger.info(&quot;Store stopped!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##附件内容类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">@XlsRecord(startRow = 1, startCol = 0, cells = &#123;</span><br><span class="line">        @XlsCell(objFieldName = &quot;CUSTODIAN_CODE&quot;, objFieldType = XlsDataType.STRING, order = 0),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Custodian_Name&quot;, objFieldType = XlsDataType.STRING, order = 1),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Dealer_Code&quot;, objFieldType = XlsDataType.STRING, order = 2),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Dealer_Name&quot;, objFieldType = XlsDataType.STRING, order = 3),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Distributor_Code&quot;, objFieldType = XlsDataType.STRING, order = 4),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Make&quot;, objFieldType = XlsDataType.STRING, order = 5),</span><br><span class="line">        @XlsCell(objFieldName = &quot;VIN_No&quot;, objFieldType = XlsDataType.STRING, order = 6),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Asset_Model&quot;, objFieldType = XlsDataType.STRING, order = 7),</span><br><span class="line">        @XlsCell(objFieldName = &quot;QC_Number&quot;, objFieldType = XlsDataType.STRING, order = 8),</span><br><span class="line">        @XlsCell(objFieldName = &quot;QC_Check&quot;, objFieldType = XlsDataType.STRING, order = 9),</span><br><span class="line">        @XlsCell(objFieldName = &quot;IMPORT_CERT_CHECK&quot;, objFieldType = XlsDataType.STRING, order = 10),</span><br><span class="line">        @XlsCell(objFieldName = &quot;CHECKLIST_CHECK&quot;, objFieldType = XlsDataType.STRING, order = 11),</span><br><span class="line">        @XlsCell(objFieldName = &quot;C_CERTIFICATE_CHECK&quot;, objFieldType = XlsDataType.STRING, order = 12),</span><br><span class="line">        @XlsCell(objFieldName = &quot;Remarks&quot;, objFieldType = XlsDataType.STRING, order = 13)</span><br><span class="line">&#125;)</span><br><span class="line">public class ReleaseMail &#123;</span><br><span class="line"></span><br><span class="line">    private String CUSTODIAN_CODE;</span><br><span class="line"></span><br><span class="line">    private String Custodian_Name;</span><br><span class="line"></span><br><span class="line">    private String Dealer_Code;</span><br><span class="line"></span><br><span class="line">    private String Dealer_Name;</span><br><span class="line"></span><br><span class="line">    private String Distributor_Code;</span><br><span class="line"></span><br><span class="line">    private String Make;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 车架号</span><br><span class="line">     * @author hefan</span><br><span class="line">     * @date 2018/11/10 10:19</span><br><span class="line">     */</span><br><span class="line">    private String VIN_No;</span><br><span class="line"></span><br><span class="line">    private String Asset_Model;</span><br><span class="line"></span><br><span class="line">    private String QC_Number;</span><br><span class="line"></span><br><span class="line">    private String QC_Check;</span><br><span class="line"></span><br><span class="line">    private String IMPORT_CERT_CHECK;</span><br><span class="line"></span><br><span class="line">    private String CHECKLIST_CHECK;</span><br><span class="line"></span><br><span class="line">    private String C_CERTIFICATE_CHECK;</span><br><span class="line"></span><br><span class="line">    private String Remarks;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 转换对象</span><br><span class="line">     * @author hefan</span><br><span class="line">     * @date 2018/11/10 15:32</span><br><span class="line">     */</span><br><span class="line">    public Paramer convertToParameter()&#123;</span><br><span class="line">        return new Paramer(this.VIN_No, (byte)0, true);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCUSTODIAN_CODE() &#123;</span><br><span class="line">        return CUSTODIAN_CODE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCUSTODIAN_CODE(String CUSTODIAN_CODE) &#123;</span><br><span class="line">        this.CUSTODIAN_CODE = CUSTODIAN_CODE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCustodian_Name() &#123;</span><br><span class="line">        return Custodian_Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCustodian_Name(String custodian_Name) &#123;</span><br><span class="line">        Custodian_Name = custodian_Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDealer_Code() &#123;</span><br><span class="line">        return Dealer_Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDealer_Code(String dealer_Code) &#123;</span><br><span class="line">        Dealer_Code = dealer_Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDealer_Name() &#123;</span><br><span class="line">        return Dealer_Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDealer_Name(String dealer_Name) &#123;</span><br><span class="line">        Dealer_Name = dealer_Name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDistributor_Code() &#123;</span><br><span class="line">        return Distributor_Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDistributor_Code(String distributor_Code) &#123;</span><br><span class="line">        Distributor_Code = distributor_Code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getMake() &#123;</span><br><span class="line">        return Make;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMake(String make) &#123;</span><br><span class="line">        Make = make;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getVIN_No() &#123;</span><br><span class="line">        return VIN_No;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setVIN_No(String VIN_No) &#123;</span><br><span class="line">        this.VIN_No = VIN_No;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getAsset_Model() &#123;</span><br><span class="line">        return Asset_Model;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAsset_Model(String asset_Model) &#123;</span><br><span class="line">        Asset_Model = asset_Model;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getQC_Number() &#123;</span><br><span class="line">        return QC_Number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setQC_Number(String QC_Number) &#123;</span><br><span class="line">        this.QC_Number = QC_Number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getQC_Check() &#123;</span><br><span class="line">        return QC_Check;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setQC_Check(String QC_Check) &#123;</span><br><span class="line">        this.QC_Check = QC_Check;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getIMPORT_CERT_CHECK() &#123;</span><br><span class="line">        return IMPORT_CERT_CHECK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setIMPORT_CERT_CHECK(String IMPORT_CERT_CHECK) &#123;</span><br><span class="line">        this.IMPORT_CERT_CHECK = IMPORT_CERT_CHECK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCHECKLIST_CHECK() &#123;</span><br><span class="line">        return CHECKLIST_CHECK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCHECKLIST_CHECK(String CHECKLIST_CHECK) &#123;</span><br><span class="line">        this.CHECKLIST_CHECK = CHECKLIST_CHECK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getC_CERTIFICATE_CHECK() &#123;</span><br><span class="line">        return C_CERTIFICATE_CHECK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setC_CERTIFICATE_CHECK(String c_CERTIFICATE_CHECK) &#123;</span><br><span class="line">        C_CERTIFICATE_CHECK = c_CERTIFICATE_CHECK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getRemarks() &#123;</span><br><span class="line">        return Remarks;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setRemarks(String remarks) &#123;</span><br><span class="line">        Remarks = remarks;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##附件详情类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">public class AttachmentDetail&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 源名称</span><br><span class="line">     */</span><br><span class="line">    private String sourceName;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 保存名称</span><br><span class="line">     */</span><br><span class="line">    private String saveName;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 解析后附件内容</span><br><span class="line">     */</span><br><span class="line">    private List&lt;T&gt; data;</span><br><span class="line"></span><br><span class="line">    public AttachmentDetail() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 构造附件详情</span><br><span class="line">     * @author hefan</span><br><span class="line">     * @date 2018/11/10 15:45</span><br><span class="line">     * @param sourceName    源名称</span><br><span class="line">     * @param saveName      保存名称</span><br><span class="line">     * @param data          解析附件数据</span><br><span class="line">     */</span><br><span class="line">    public AttachmentDetail(String sourceName, String saveName, List&lt;T&gt; data) &#123;</span><br><span class="line">        this.sourceName = sourceName;</span><br><span class="line">        this.saveName = saveName;</span><br><span class="line">        this.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getSourceName() &#123;</span><br><span class="line">        return sourceName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSourceName(String sourceName) &#123;</span><br><span class="line">        this.sourceName = sourceName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getSaveName() &#123;</span><br><span class="line">        return saveName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSaveName(String saveName) &#123;</span><br><span class="line">        this.saveName = saveName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public List&lt;T&gt; getData() &#123;</span><br><span class="line">        return data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(List&lt;T&gt; data) &#123;</span><br><span class="line">        this.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##业务逻辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">   private MailMonitor mailMonitor;</span><br><span class="line"></span><br><span class="line">   @Autowired</span><br><span class="line">   private RfidReceiveMailLogMapper rfidReceiveMailLogMapper;</span><br><span class="line"></span><br><span class="line">   @Autowired</span><br><span class="line">   private BorrowingService borrowingService;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">    * 邮件附件存储位置</span><br><span class="line">    * @author hefan</span><br><span class="line">    * @date 2018/11/9 16:08</span><br><span class="line">    */</span><br><span class="line">   @Value(&quot;$&#123;custom.mail.attachments.save.path&#125;&quot;)</span><br><span class="line">   private String MAIL_ATTACHMENTS_SAVE_PATH;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">    * 附件保存前缀</span><br><span class="line">    */</span><br><span class="line">   @Value(&quot;$&#123;custom.mail.attachments.save.prefix&#125;&quot;)</span><br><span class="line">   private String MAIL_ATTACHMENTS_SAVE_PREFIX;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">    * 邮件名匹配关键词</span><br><span class="line">    * @author hefan</span><br><span class="line">    * @date 2018/11/10 15:02</span><br><span class="line">    */</span><br><span class="line">   @Value(&quot;$&#123;custom.mail.match.key&#125;&quot;)</span><br><span class="line">   private String MAIL_MATCH_KEY;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public void read() &#123;</span><br><span class="line">       IMAPFolder folder = null;</span><br><span class="line">       try &#123;</span><br><span class="line">           folder = mailMonitor.getAndOpen();</span><br><span class="line">           //获取总邮件数</span><br><span class="line">           logger.debug(&quot;-----------------共有邮件：&quot; + folder.getMessageCount() + &quot; 封--------------&quot;);</span><br><span class="line">           logger.debug(&quot;-----------------未读邮件数：&quot; + folder.getUnreadMessageCount() + &quot;--------------&quot;);</span><br><span class="line">           List&lt;Message&gt; messages = Stream.of(folder.getMessages())</span><br><span class="line">                   .filter(this::isNotRead)</span><br><span class="line">                   .collect(Collectors.toList());</span><br><span class="line">           if(CollectionUtils.isEmpty(messages))&#123;</span><br><span class="line">               logger.debug(&quot;-----------------no unread mail--------------&quot;);</span><br><span class="line">               return;</span><br><span class="line">           &#125;</span><br><span class="line">           AttachmentDetail&lt;ReleaseMail&gt; detail = null;</span><br><span class="line">           List&lt;ReleaseMail&gt; data = null;</span><br><span class="line">           List&lt;Paramer&gt; parameters = null;</span><br><span class="line">           for (Message message : messages) &#123;</span><br><span class="line">               try &#123;</span><br><span class="line">                   detail = analyzeAndRecordLog(message);</span><br><span class="line">                   data = detail.getData();</span><br><span class="line">                   if(CollectionUtils.isEmpty(data))&#123;</span><br><span class="line">                       continue;</span><br><span class="line">                   &#125;</span><br><span class="line">                   logger.debug(&quot;mail release start...&quot;);</span><br><span class="line">                   //邮件释放开始</span><br><span class="line">                   parameters = data.stream()</span><br><span class="line">                           .map(ReleaseMail::convertToParameter)</span><br><span class="line">                           .collect(Collectors.toList());</span><br><span class="line">                   borrowingService.mailRelease(parameters);</span><br><span class="line">                   logger.debug(&quot;mail release end...&quot;);</span><br><span class="line">               &#125; catch (Exception e)&#123;</span><br><span class="line">                   logger.error(&quot;analyze and record log error，msgNumber:&quot;</span><br><span class="line">                           + message.getMessageNumber()</span><br><span class="line">                           + &quot;,parameters:&quot;</span><br><span class="line">                           + JSON.toJSONString(parameters), e);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           logger.debug(&quot;-----------------finish insert mail log--------------&quot;);</span><br><span class="line">       &#125; catch (MessagingException e)&#123;</span><br><span class="line">           logger.error(&quot;recevice message error！&quot;, e);</span><br><span class="line">       &#125; finally &#123;</span><br><span class="line">           if(null != folder)&#123;</span><br><span class="line">               try &#123;</span><br><span class="line">                   folder.close(true);</span><br><span class="line">               &#125; catch (MessagingException e) &#123;</span><br><span class="line">                   logger.error(&quot;close mail folder error！&quot;, e);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">    * 判断是否已读</span><br><span class="line">    * @author hefan</span><br><span class="line">    * @date 2018/11/9 15:49</span><br><span class="line">    */</span><br><span class="line">   public boolean isNotRead(Message message)&#123;</span><br><span class="line">       boolean flag = false;</span><br><span class="line">       try &#123;</span><br><span class="line">           flag = MailUtils.isSeen((MimeMessage) message);</span><br><span class="line">       &#125; catch (MessagingException e)&#123;</span><br><span class="line">           logger.error(&quot;判断邮件读取状态异常！&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">       return !flag;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">    * 分析并记录日志</span><br><span class="line">    * @author hefan</span><br><span class="line">    * @date 2018/11/10 15:20</span><br><span class="line">    */</span><br><span class="line">   public AttachmentDetail analyzeAndRecordLog(Message msg) throws Exception &#123;</span><br><span class="line">       boolean isContainAttachment = MailUtils.isContainAttachment(msg);</span><br><span class="line">       if (!isContainAttachment) &#123;</span><br><span class="line">           logger.error(&quot;mail no attachments！msgNumber:&quot; + msg.getMessageNumber());</span><br><span class="line">           return new AttachmentDetail();</span><br><span class="line">       &#125;</span><br><span class="line">       AttachmentDetail detail = null;</span><br><span class="line">       RfidReceiveMailLog mailLog = new RfidReceiveMailLog();</span><br><span class="line">       mailLog.setAddress(MailUtils.getFrom((MimeMessage) msg));</span><br><span class="line">       //save attachment</span><br><span class="line">       detail = MailUtils.saveAttachment(msg, MAIL_ATTACHMENTS_SAVE_PATH,</span><br><span class="line">               MAIL_MATCH_KEY, MAIL_ATTACHMENTS_SAVE_PREFIX, ReleaseMail.class);</span><br><span class="line">       if(null == detail)&#123;</span><br><span class="line">           logger.error(&quot;illegal attachments！msgNumber:&quot; + msg.getMessageNumber());</span><br><span class="line">           return new AttachmentDetail();</span><br><span class="line">       &#125;</span><br><span class="line">       mailLog.setAttachmentSaveName(detail.getSaveName());</span><br><span class="line">       mailLog.setAttachmentSourceName(detail.getSourceName());</span><br><span class="line">       mailLog.setContent(msg.getContent() + &quot;&quot;);</span><br><span class="line">       mailLog.setMsgNumber(msg.getMessageNumber());</span><br><span class="line">       mailLog.setReceivedDate(msg.getReceivedDate());</span><br><span class="line">       mailLog.setSentDate(msg.getSentDate());</span><br><span class="line">       mailLog.setSubject(msg.getSubject());</span><br><span class="line">       rfidReceiveMailLogMapper.insertSelective(mailLog);</span><br><span class="line">       return detail;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/15/邮件解析/" data-id="cjoi96yxw000j6whx2ayyuzp8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-手机号-固话-身份证-校验" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/15/手机号-固话-身份证-校验/" class="article-date">
  <time datetime="2018-11-15T02:23:55.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/15/手机号-固话-身份证-校验/">手机号 固话 身份证 校验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">public class ValidatorUtils &#123;</span><br><span class="line">	</span><br><span class="line">	public static final String REG_EXP_PHONE = &quot;(\\+\\d+)?1[34578]\\d&#123;9&#125;$|(\\+\\d+)?(\\d&#123;3,4&#125;\\-?)?\\d&#123;7,8&#125;$&quot;;</span><br><span class="line">	</span><br><span class="line">	/** </span><br><span class="line">     * 验证Email </span><br><span class="line">     * @param email email地址，格式：zhangsan@zuidaima.com，zhangsan@xxx.com.cn，xxx代表邮件服务商 </span><br><span class="line">     * @return 验证成功返回true，验证失败返回false </span><br><span class="line">     */ </span><br><span class="line">    public static boolean isEmail(String str)&#123;  </span><br><span class="line">        if(StringUtils.isBlank(str))  </span><br><span class="line">            return false;  </span><br><span class="line">        return str.matches(&quot;^[\\w-]+(\\.[\\w-]+)*@[\\w-]+(\\.[\\w-]+)+$&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    /** </span><br><span class="line">     * 验证手机号码（支持国际格式，+86135xxxx...（中国内地），+00852137xxxx...（中国香港）） </span><br><span class="line">     * @param mobile 移动、联通、电信运营商的号码段 </span><br><span class="line">     *&lt;p&gt;移动的号段：134(0-8)、135、136、137、138、139、147（预计用于TD上网卡） </span><br><span class="line">     *、150、151、152、157（TD专用）、158、159、187（未启用）、188（TD专用）&lt;/p&gt; </span><br><span class="line">     *&lt;p&gt;联通的号段：130、131、132、155、156（世界风专用）、185（未启用）、186（3g）&lt;/p&gt; </span><br><span class="line">     *&lt;p&gt;电信的号段：133、153、180（未启用）、189&lt;/p&gt; </span><br><span class="line">     *&lt;p&gt;虚拟运营商的号段：170未启用）&lt;/p&gt; </span><br><span class="line">     * @return 验证成功返回true，验证失败返回false </span><br><span class="line">     */   </span><br><span class="line">    public static boolean isMobile(String str)&#123;  </span><br><span class="line">        if(StringUtils.isBlank(str))  </span><br><span class="line">            return false;  </span><br><span class="line">        return str.matches(&quot;(\\+\\d+)?1[34578]\\d&#123;9&#125;$&quot;);  </span><br><span class="line">    &#125;  </span><br><span class="line">       </span><br><span class="line">    /** </span><br><span class="line">     * 验证固定电话号码 </span><br><span class="line">     * @param phone 电话号码，格式：国家（地区）电话代码 + 区号（城市代码） + 电话号码，如：+8602085588447 </span><br><span class="line">     * &lt;p&gt;&lt;b&gt;国家（地区） 代码 ：&lt;/b&gt;标识电话号码的国家（地区）的标准国家（地区）代码。它包含从 0 到 9 的一位或多位数字， </span><br><span class="line">     *  数字之后是空格分隔的国家（地区）代码。&lt;/p&gt; </span><br><span class="line">     * &lt;p&gt;&lt;b&gt;区号（城市代码）：&lt;/b&gt;这可能包含一个或多个从 0 到 9 的数字，地区或城市代码放在圆括号—— </span><br><span class="line">     * 对不使用地区或城市代码的国家（地区），则省略该组件。&lt;/p&gt; </span><br><span class="line">     * &lt;p&gt;&lt;b&gt;电话号码：&lt;/b&gt;这包含从 0 到 9 的一个或多个数字 &lt;/p&gt; </span><br><span class="line">     * @return 验证成功返回true，验证失败返回false </span><br><span class="line">     */   </span><br><span class="line">    public static boolean isPhone(String str) &#123;  </span><br><span class="line">    	if(StringUtils.isBlank(str))  </span><br><span class="line">             return false;</span><br><span class="line">        return str.matches(&quot;(\\+\\d+)?(\\d&#123;3,4&#125;\\-?)?\\d&#123;7,8&#125;$&quot;);   </span><br><span class="line">    &#125;  </span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 微信识别号</span><br><span class="line">     * 校验位数为12位</span><br><span class="line">     * @param str</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static boolean isWeiXinIdent(String str)&#123;</span><br><span class="line">        Pattern pattern = Pattern.compile(&quot;^[A-H|J-N|P-Y]&#123;2&#125;\\d&#123;13&#125;$&quot;);</span><br><span class="line">    	if(!StringUtils.isBlank(str))  </span><br><span class="line">    	    return pattern.matcher(str).matches();</span><br><span class="line">    	return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    /** </span><br><span class="line">     * 验证身份证号码 </span><br><span class="line">     * @param idCard 居民身份证号码15位或18位，最后一位可能是数字或字母 </span><br><span class="line">     * @return 验证成功返回true，验证失败返回false </span><br><span class="line">     */   </span><br><span class="line">    public static boolean isIdCard(String str) &#123; </span><br><span class="line">    	if(StringUtils.isBlank(str))  </span><br><span class="line">            return false;</span><br><span class="line">        return str.matches(&quot;[1-9]\\d&#123;13,16&#125;[a-zA-Z0-9]&#123;1&#125;&quot;);   </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验证Url前缀</span><br><span class="line">     * /api-XX</span><br><span class="line">     * @author hefan</span><br><span class="line">     * @date 2018/5/21 11:20</span><br><span class="line">     */</span><br><span class="line">    public static boolean isUriPrefix(String str)&#123;</span><br><span class="line">        if(StringUtils.isBlank(str))</span><br><span class="line">            return false;</span><br><span class="line">        return str.matches(&quot;/+[A-Za-z0-9\\-]+&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/15/手机号-固话-身份证-校验/" data-id="cjoi96yxp000a6whxvya9h41m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-时间计算工具类" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/15/时间计算工具类/" class="article-date">
  <time datetime="2018-11-15T02:11:03.000Z" itemprop="datePublished">2018-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/15/时间计算工具类/">时间计算工具类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>时间计算方法的汇总：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br></pre></td><td class="code"><pre><span class="line">public final class DateTimeUtils &#123;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年(yyyy)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR = &quot;yyyy&quot;;</span><br><span class="line">	/**</span><br><span class="line">	 * 月(MM)</span><br><span class="line">	 */</span><br><span class="line">	public static final String MONTH = &quot;MM&quot;;</span><br><span class="line">	/**</span><br><span class="line">	 * 日(dd)</span><br><span class="line">	 */</span><br><span class="line">	public static final String DAY = &quot;dd&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月(yyMM)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_SUPER_SIMPLE = &quot;yyMM&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月(yyyy-MM)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH = &quot;yyyy-MM&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月(yyyyMM)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_SIMPLE = &quot;yyyyMM&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日(yyyy-MM-dd)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY = &quot;yyyy-MM-dd&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月日(yyyyMMdd)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_SIMPLE = &quot;yyyyMMdd&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月日(yyMMdd)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_SUPER_SIMPLE = &quot;yyMMdd&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 小时(yyyy-MM-dd HH)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR = &quot;yyyy-MM-dd HH&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * M月d日 H:m(yyyy-MM-dd HH)</span><br><span class="line">	 */</span><br><span class="line">	public static final String MONTH_DAY_HOUR_MINUTE_CN = &quot;MM月dd日HH时mm分&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 小时(yyyy-MM-dd HH)中文输出</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_CN = &quot;yyyy年MM月dd日HH时&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 (yyyy-MM-dd)中文输出</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_CN = &quot;yyyy年MM月dd日&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 小时:分钟(yyyy-MM-dd HH:mm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE = &quot;yyyy-MM-dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 小时:分钟:秒钟(yyyy-MM-dd HH:mm:ss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND = &quot;yyyy-MM-dd HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月日小时分钟秒钟(yyyyMMddHHmmss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SIMPLE = &quot;yyyyMMddHHmmss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月日小时分钟秒钟毫秒(yyyyMMddHHmmssSSS)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_MILLI_SIMPLE = &quot;yyyyMMddHHmmssSSS&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月日小时分钟(yyyyMMddHHmm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SIMPLE = &quot;yyyyMMddHHmm&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年月日小时分钟秒钟(yyMMddHHmmss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SUPER_SIMPLE = &quot;yyMMddHHmmss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年/月/日 小时:分钟:秒钟(yy/MM/dd HH:mm:ss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SUPER_SIMPLE_2 = &quot;yy/MM/dd HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年/月/日 小时:分钟(yy/MM/dd HH:mm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SUPER_SIMPLE_3 = &quot;yy/MM/dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 年/月/日 小时:分钟(yy/M/dd HH:mm)</span><br><span class="line">     */</span><br><span class="line">    public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SUPER_SIMPLE_4 = &quot;yy/M/dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年/月/日 小时:分钟(yy/M/dd HH:mm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SUPER_SIMPLE_5 = &quot;yyyy/M/dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年/月/日 小时:分钟(yyyy/M/dd HH:mm:ss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SUPER_SIMPLE_6 = &quot;yyyy/M/dd HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 时:分(yy-MM-dd HH:mm分)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SUPER_SIMPLE = &quot;yy-MM-dd HH:mm分&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 时:分:秒(yy-MM-dd HH:mm:ss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SUPER_SIMPLE_2 = &quot;yy-MM-dd HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 年-月-日 时:分(yy-MM-dd HH:mm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String YEAR_MONTH_DAY_HOUR_MINUTE_SUPER_SIMPLE_3 = &quot;yy-MM-dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 月-日 时:分(MM-dd HH:mm)</span><br><span class="line">     */</span><br><span class="line">    public static final String MONTH_DAY_HOUR_MINUTE_SUPER_SIMPLE = &quot;MM-dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * convert Date to cron ,eg.  &quot;0 06 10 15 1 ? 2014&quot;</span><br><span class="line">     */</span><br><span class="line">	private static final String SECOND_MINUTE_HOUR_DAY_MONTH_YEAR_CORN = &quot;ss mm HH dd MM ? yyyy&quot;;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * 小时:分钟:秒钟(HH:mm:ss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String HOUR_MINUTE_SECOND = &quot;HH:mm:ss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 月-日 时:分(MM-dd HH:mm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String MONTH_DAY_HOUR_MINUTE = &quot;MM-dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 月-日2 时:分(M-dd HH:mm)</span><br><span class="line">     */</span><br><span class="line">    public static final String MONTH_DAY_HOUR_MINUTE_2 = &quot;M-dd HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 小时:分钟(HH:mm)</span><br><span class="line">	 */</span><br><span class="line">	public static final String HOUR_MINUTE = &quot;HH:mm&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 秒(ss)</span><br><span class="line">	 */</span><br><span class="line">	public static final String SECOND = &quot;ss&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 月.日(M.d)</span><br><span class="line">	 */</span><br><span class="line">	public static final String MONTH_DAY = &quot;M.d&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 一天的秒数</span><br><span class="line">	 */</span><br><span class="line">	private static final int DAY_SECOND = 24 * 60 * 60;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 一小时的秒数</span><br><span class="line">	 */</span><br><span class="line">	private static final int HOUR_SECOND = 60 * 60;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 一分钟的秒数</span><br><span class="line">	 */</span><br><span class="line">	private static final int MINUTE_SECOND = 60;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 格式化日期时间</span><br><span class="line">	 *</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            Date对象</span><br><span class="line">	 * @param pattern</span><br><span class="line">	 *            模式</span><br><span class="line">	 * @return 格式化后的日期时间字符串</span><br><span class="line">	 */</span><br><span class="line">	public static String format(Date date, String pattern) &#123;</span><br><span class="line">		if (date == null)</span><br><span class="line">			return &quot;&quot;;</span><br><span class="line">		return new DateTime(date).toString(pattern);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 格式化日期时间字符串</span><br><span class="line">	 *</span><br><span class="line">	 * @param dateString</span><br><span class="line">	 *            日期时间字符串</span><br><span class="line">	 * @param pattern</span><br><span class="line">	 *            模式</span><br><span class="line">	 * @return Date对象</span><br><span class="line">	 */</span><br><span class="line">	public static Date formatDateString(String dateString, String pattern) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern(pattern);</span><br><span class="line">			return dateTimeFormatter.parseDateTime(dateString).toDate();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">     /**</span><br><span class="line">      * @date 2018/3/19 11:02</span><br><span class="line">	 * @param date 格式 2018-03-19</span><br><span class="line">	 * @return  反馈 时间为当天最后时间 2018-03-19 23:59:59</span><br><span class="line">	 */</span><br><span class="line">	public static Date formatEndTime(Date date)&#123;</span><br><span class="line">		String strDate = DateTimeUtils.format(date, DateTimeUtils.YEAR_MONTH_DAY);</span><br><span class="line">		strDate += &quot; 23:59:59&quot;;</span><br><span class="line">		return DateTimeUtils.formatDateString(strDate, DateTimeUtils.YEAR_MONTH_DAY_HOUR_MINUTE_SECOND);</span><br><span class="line">	&#125;</span><br><span class="line">	/**</span><br><span class="line">	 * 格式化日期时间字符串 到 目标格式时间字符串</span><br><span class="line">	 * @date 2017年7月14日 下午5:17:01</span><br><span class="line">	 * @param dateString</span><br><span class="line">	 *            原日期字符串</span><br><span class="line">	 * @param patternRes</span><br><span class="line">	 *            原日期格式</span><br><span class="line">	 * @param patternTar</span><br><span class="line">	 *            目标日期格式</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static String formatDateString2DateString(String dateString, String patternRes, String patternTar) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			DateTimeFormatter dateTimeFormatterRes = DateTimeFormat.forPattern(patternRes);</span><br><span class="line">			Date date = dateTimeFormatterRes.parseDateTime(dateString).toDate();</span><br><span class="line">			return new DateTime(date).toString(patternTar);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 根据秒数获得x天x小时x分钟x秒字符串</span><br><span class="line">	 *</span><br><span class="line">	 * @param second</span><br><span class="line">	 *            秒数</span><br><span class="line">	 * @return x天x小时x分钟x秒字符串</span><br><span class="line">	 */</span><br><span class="line">	public static String getDayHourMinuteSecond(int second) &#123;</span><br><span class="line">		if (second == 0) &#123;</span><br><span class="line">			return &quot;0秒&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		StringBuilder sb = new StringBuilder();</span><br><span class="line">		int days = second / DAY_SECOND;</span><br><span class="line">		if (days &gt; 0) &#123;</span><br><span class="line">			sb.append(days);</span><br><span class="line">			sb.append(&quot;天&quot;);</span><br><span class="line">			second -= days * DAY_SECOND;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		int hours = second / HOUR_SECOND;</span><br><span class="line">		if (hours &gt; 0) &#123;</span><br><span class="line">			sb.append(hours);</span><br><span class="line">			sb.append(&quot;小时&quot;);</span><br><span class="line">			second -= hours * HOUR_SECOND;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		int minutes = second / MINUTE_SECOND;</span><br><span class="line">		if (minutes &gt; 0) &#123;</span><br><span class="line">			sb.append(minutes);</span><br><span class="line">			sb.append(&quot;分钟&quot;);</span><br><span class="line">			second -= minutes * MINUTE_SECOND;</span><br><span class="line">		&#125;</span><br><span class="line">		if (second &gt; 0) &#123;</span><br><span class="line">			sb.append(second);</span><br><span class="line">			sb.append(&quot;秒&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		return sb.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据描述获取时间描述，若小于60s则默认为1分钟</span><br><span class="line">     *</span><br><span class="line">     * @param second</span><br><span class="line">     *            秒数</span><br><span class="line">     * @return x天x时x分字符串</span><br><span class="line">     */</span><br><span class="line">    public static String convertTimeDescription(int second) &#123;</span><br><span class="line">        if (second == 0) &#123;</span><br><span class="line">            return &quot;0分钟&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = new StringBuilder();</span><br><span class="line">        int hours = second / HOUR_SECOND;</span><br><span class="line">        if (hours &gt; 0) &#123;</span><br><span class="line">            sb.append(hours);</span><br><span class="line">            sb.append(&quot;小时&quot;);</span><br><span class="line">            second -= hours * HOUR_SECOND;</span><br><span class="line">        &#125;</span><br><span class="line">        int minutes = second / MINUTE_SECOND;</span><br><span class="line">        if (minutes &gt; 0) &#123;</span><br><span class="line">            sb.append(minutes);</span><br><span class="line">            sb.append(&quot;分钟&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 根据秒数获得x天x时x分字符串</span><br><span class="line">	 * @param second</span><br><span class="line">	 *            秒数</span><br><span class="line">	 * @return x天x时x分字符串</span><br><span class="line">	 */</span><br><span class="line">	public static String getDayHourMinute(int second) &#123;</span><br><span class="line">		if (second == 0) &#123;</span><br><span class="line">			return &quot;0分&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		StringBuilder sb = new StringBuilder();</span><br><span class="line">		int days = second / DAY_SECOND;</span><br><span class="line">		if (days &gt; 0) &#123;</span><br><span class="line">			sb.append(days);</span><br><span class="line">			sb.append(&quot;天&quot;);</span><br><span class="line">			second -= days * DAY_SECOND;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		int hours = second / HOUR_SECOND;</span><br><span class="line">		if (hours &gt; 0) &#123;</span><br><span class="line">			sb.append(hours);</span><br><span class="line">			sb.append(&quot;时&quot;);</span><br><span class="line">			second -= hours * HOUR_SECOND;</span><br><span class="line">		&#125;</span><br><span class="line">		int minutes = second / MINUTE_SECOND;</span><br><span class="line">		if (minutes &gt; 0) &#123;</span><br><span class="line">			sb.append(minutes);</span><br><span class="line">			sb.append(&quot;分&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		return sb.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取只含有年月日的DateTime对象</span><br><span class="line">	 * @param dateTime</span><br><span class="line">	 *            DateTime对象</span><br><span class="line">	 * @return 只含有年月日的DateTime对象</span><br><span class="line">	 */</span><br><span class="line">	public static DateTime getDateOnly(DateTime dateTime) &#123;</span><br><span class="line">		return new DateTime(dateTime.toString(YEAR_MONTH_DAY));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取当前周的周一和下周一</span><br><span class="line">	 * @return 日期数组（索引0为周一，索引1为下周一）</span><br><span class="line">	 */</span><br><span class="line">	public static Date[] getMondayAndNextMonday() &#123;</span><br><span class="line">		DateTime dateTime = getDateOnly(new DateTime());</span><br><span class="line">		DateTime monday = dateTime.dayOfWeek().withMinimumValue();</span><br><span class="line">		DateTime nextMonday = monday.plusDays(7);</span><br><span class="line">		return new Date[] &#123; monday.toDate(), nextMonday.toDate() &#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取指定时间的周一和周日</span><br><span class="line">	 * @param dateTime</span><br><span class="line">	 *            DateTime对象</span><br><span class="line">	 * @return 日期数组（索引0为周一，索引1为周日）</span><br><span class="line">	 */</span><br><span class="line">	public static Date[] getMondayAndSunday(DateTime dateTime) &#123;</span><br><span class="line">		dateTime = getDateOnly(dateTime);</span><br><span class="line">		DateTime monday = dateTime.dayOfWeek().withMinimumValue();</span><br><span class="line">		DateTime sunday = monday.plusDays(6);</span><br><span class="line">		return new Date[] &#123; monday.toDate(), sunday.toDate() &#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 比较时间a到时间b的分钟差</span><br><span class="line">     * @param a</span><br><span class="line">     * @param b</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">	public static int compareMinutesWithDate(Date a, Date b) &#123;</span><br><span class="line">		return Minutes.minutesBetween(new DateTime(a), new DateTime(b)).getMinutes();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 和当前时间相比的天数差（正数为大于天数，负数为小于天数，零为同一天）</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            Date对象</span><br><span class="line">	 * @return 和当前时间相比的天数差</span><br><span class="line">	 */</span><br><span class="line">	public static int compareDaysWithNow(Date date) &#123;</span><br><span class="line">		return Days.daysBetween(new DateTime(), new DateTime(date)).getDays();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 和今天相比的天数差（正数为大于天数，负数为小于天数，零为同一天）</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            Date对象</span><br><span class="line">	 * @return 和今天相比的天数差</span><br><span class="line">	 */</span><br><span class="line">	public static int compareDaysWithToday(Date date) &#123;</span><br><span class="line">		DateTime today = new DateTime();</span><br><span class="line">		today = new DateTime(today.getYear(), today.getMonthOfYear(), today.getDayOfMonth(), 0, 0, 0, 0);</span><br><span class="line">		DateTime compareDay = new DateTime(date);</span><br><span class="line">		compareDay = new DateTime(compareDay.getYear(), compareDay.getMonthOfYear(), compareDay.getDayOfMonth(), 0, 0,</span><br><span class="line">				0, 0);</span><br><span class="line">		return Days.daysBetween(today, compareDay).getDays();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 比较时间a到时间b的天数差</span><br><span class="line">	 * @param a</span><br><span class="line">	 *            时间a</span><br><span class="line">	 * @param b</span><br><span class="line">	 *            时间b</span><br><span class="line">	 * @return 相差天数</span><br><span class="line">	 */</span><br><span class="line">	public static int compareDaysWithDay(Date a, Date b) &#123;</span><br><span class="line">		DateTime today = new DateTime(b);</span><br><span class="line">		today = new DateTime(today.getYear(), today.getMonthOfYear(), today.getDayOfMonth(), 0, 0, 0, 0);</span><br><span class="line">		DateTime compareDay = new DateTime(a);</span><br><span class="line">		compareDay = new DateTime(compareDay.getYear(), compareDay.getMonthOfYear(), compareDay.getDayOfMonth(), 0, 0,</span><br><span class="line">				0, 0);</span><br><span class="line">		return Days.daysBetween(today, compareDay).getDays();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 比较两个时间是否相等（省略毫秒）</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            Date对象</span><br><span class="line">	 * @param compareDate</span><br><span class="line">	 *            比较Date对象</span><br><span class="line">	 * @return 是否相等</span><br><span class="line">	 */</span><br><span class="line">	public static boolean compareDateIgnoreMillisecond(Date date, Date compareDate) &#123;</span><br><span class="line">		if (date == null &amp;&amp; compareDate == null) &#123;</span><br><span class="line">			return true;</span><br><span class="line">		&#125; else if (date == null &amp;&amp; compareDate != null) &#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125; else if (date != null &amp;&amp; compareDate == null) &#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return (date.getTime() / 1000 == compareDate.getTime() / 1000);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 根据秒数获取天数</span><br><span class="line">	 * @param second</span><br><span class="line">	 *            秒数</span><br><span class="line">	 * @return 天数</span><br><span class="line">	 */</span><br><span class="line">	public static int getDay(int second) &#123;</span><br><span class="line">		return second / DAY_SECOND;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取和今天相比的日期字符串</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            Date对象</span><br><span class="line">	 * @return 和今天相比的日期字符串</span><br><span class="line">	 */</span><br><span class="line">	public static String getCompareWithTodayDateString(Date date) &#123;</span><br><span class="line">		int days = Math.abs(DateTimeUtils.compareDaysWithToday(date));</span><br><span class="line">		String dateString = &quot;&quot;;</span><br><span class="line">		if (days == 0) &#123;</span><br><span class="line">			dateString = &quot;今天&quot;;</span><br><span class="line">		&#125; else if (days == 1) &#123;</span><br><span class="line">			dateString = &quot;昨天&quot;;</span><br><span class="line">		&#125; else if (days == 2) &#123;</span><br><span class="line">			dateString = &quot;2天前&quot;;</span><br><span class="line">		&#125; else if (days == 3) &#123;</span><br><span class="line">			dateString = &quot;3天前&quot;;</span><br><span class="line">		&#125; else if (days == 4) &#123;</span><br><span class="line">			dateString = &quot;4天前&quot;;</span><br><span class="line">		&#125; else if (days == 5) &#123;</span><br><span class="line">			dateString = &quot;5天前&quot;;</span><br><span class="line">		&#125; else if (days == 6) &#123;</span><br><span class="line">			dateString = &quot;6天前&quot;;</span><br><span class="line">		&#125; else if (days &gt; 6 &amp;&amp; days &lt;= 14) &#123;</span><br><span class="line">			dateString = &quot;1周前&quot;;</span><br><span class="line">		&#125; else if (days &gt; 14 &amp;&amp; days &lt;= 21) &#123;</span><br><span class="line">			dateString = &quot;2周前&quot;;</span><br><span class="line">		&#125; else if (days &gt; 21 &amp;&amp; days &lt;= 30) &#123;</span><br><span class="line">			dateString = &quot;3周前&quot;;</span><br><span class="line">		&#125; else if (days &gt; 30) &#123;</span><br><span class="line">			dateString = &quot;1月前&quot;;</span><br><span class="line">		&#125; else if (days &gt; 365) &#123;</span><br><span class="line">			dateString = &quot;1年前&quot;;</span><br><span class="line">		&#125; else if (days &gt; 365 * 3) &#123;</span><br><span class="line">			dateString = &quot;3年前&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		return dateString;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * 获取和今天相比的日期字符串</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            Date对象</span><br><span class="line">	 * @return 和今天相比的日期字符串</span><br><span class="line">	 */</span><br><span class="line">	public static String getCompareWithTodayDayString(Date date) &#123;</span><br><span class="line">		int days = Math.abs(DateTimeUtils.compareDaysWithToday(date));</span><br><span class="line">		String dateString = &quot;&quot;;</span><br><span class="line">		if (days == 0) &#123;</span><br><span class="line">			dateString = &quot;今天&quot;;</span><br><span class="line">		&#125; else if (days == 1) &#123;</span><br><span class="line">			dateString = &quot;昨天&quot;;</span><br><span class="line">		&#125; else if (days &gt;= 2) &#123;</span><br><span class="line">			dateString = days + &quot;天前&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		return dateString;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 比较两个时间相差分钟数</span><br><span class="line">	 * @param now</span><br><span class="line">	 *            当前时间</span><br><span class="line">	 * @param compareDate</span><br><span class="line">	 *            比较时间</span><br><span class="line">	 * @return 相差分钟数</span><br><span class="line">	 */</span><br><span class="line">	public static int compareMinutes(Date now, Date compareDate) &#123;</span><br><span class="line">		return (int) (now.getTime() - compareDate.getTime()) / 60000;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 比较两个时间相差秒数</span><br><span class="line">	 * @param now</span><br><span class="line">	 *            当前时间</span><br><span class="line">	 * @param compareDate</span><br><span class="line">	 *            比较时间</span><br><span class="line">	 * @return 相差秒数</span><br><span class="line">	 */</span><br><span class="line">	public static int compareSeconds(Date now, Date compareDate) &#123;</span><br><span class="line">		return (int) (now.getTime() - compareDate.getTime()) / 1000;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 比较时间是本月的第几天</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static int getDayOfMonth(Date date) &#123;</span><br><span class="line">		DateTime dateTime = new DateTime(date);</span><br><span class="line">		return dateTime.getDayOfMonth();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 计算当月有几天</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static int getDateOfMonth(Date date) &#123;</span><br><span class="line">		DateTime dateTime = new DateTime(date);</span><br><span class="line">		return dateTime.dayOfMonth().getMaximumValue();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 指定时间,判断该时间到现在时间的年数</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            指定时间</span><br><span class="line">	 * @return 到现在时间的年数</span><br><span class="line">	 */</span><br><span class="line">	public static int compareYear(Date date) &#123;</span><br><span class="line">		DateTime btd = new DateTime(date);</span><br><span class="line">		DateTime nowDate = new DateTime();</span><br><span class="line">		int year = 0;</span><br><span class="line">		if (nowDate.getMonthOfYear() &gt; btd.getMonthOfYear()) &#123;</span><br><span class="line">			year = nowDate.getYear() - btd.getYear();</span><br><span class="line">		&#125; else if (nowDate.getMonthOfYear() &lt; btd.getMonthOfYear()) &#123;</span><br><span class="line">			year = nowDate.getYear() - btd.getYear() - 1;</span><br><span class="line">		&#125; else if (nowDate.getMonthOfYear() == btd.getMonthOfYear()) &#123;</span><br><span class="line">			if (nowDate.getDayOfMonth() &gt;= btd.getDayOfMonth()) &#123;</span><br><span class="line">				year = nowDate.getYear() - btd.getYear();</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				year = nowDate.getYear() - btd.getYear() - 1;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return year;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 计算指定时间相差的年数</span><br><span class="line">	 * @param startDate</span><br><span class="line">	 *            开始时间</span><br><span class="line">	 * @param endDate</span><br><span class="line">	 *            结束时间</span><br><span class="line">	 * @return 到现在时间的年数</span><br><span class="line">	 */</span><br><span class="line">	public static int compareYear(Date startDate, Date endDate) &#123;</span><br><span class="line">		Calendar calBegin = Calendar.getInstance(); // 获取日历实例</span><br><span class="line">		Calendar calEnd = Calendar.getInstance();</span><br><span class="line">		calBegin.setTime(startDate); // 字符串按照指定格式转化为日期</span><br><span class="line">		calEnd.setTime(endDate);</span><br><span class="line">		return calEnd.get(Calendar.YEAR) - calBegin.get(Calendar.YEAR);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 判断2个时间的时间差 返回字符串形式</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            要对比的字符串</span><br><span class="line">	 * @param date2</span><br><span class="line">	 *            要对比的字符串</span><br><span class="line">	 * @return 字符串形式 如1小时 ，2天2小时</span><br><span class="line">	 */</span><br><span class="line">	public static String compareDaysWithDate(Date date, Date date2) &#123;</span><br><span class="line">		StringBuilder msg = new StringBuilder();</span><br><span class="line">		int minutes = (int) Math.abs((date.getTime() - date2.getTime()) / 60000);</span><br><span class="line">		if (minutes / 60 &gt; 0 &amp;&amp; minutes / 60 / 24 &lt;= 0) &#123;</span><br><span class="line">			msg.append(minutes / 60 + &quot;小时&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		if (minutes / 60 / 24 &gt; 0) &#123;</span><br><span class="line">			msg.append(minutes / 60 / 24 + &quot;天&quot;);</span><br><span class="line">			msg.append(minutes / 60 % 24 + &quot;小时&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		return msg.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static final String REG_EXP_DATE = &quot;^((([0-9]&#123;3&#125;[1-9]|[0-9]&#123;2&#125;[1-9][0-9]&#123;1&#125;|[0-9]&#123;1&#125;[1-9][0-9]&#123;2&#125;|[1-9][0-9]&#123;3&#125;)-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]&#123;2&#125;)(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29))\\s+([0-1]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 自动解析多种格式的时间字符串为时间对象&lt;br&gt;</span><br><span class="line">	 * 支持格式为：yyyy-MM-dd HH:mm:ss 支持多种分隔符，以及多种日期精度。 如yyyy年MM月。 HH时mm分ss秒</span><br><span class="line">	 *</span><br><span class="line">	 * @param dateString</span><br><span class="line">	 *            时间字符串 &lt;br&gt;</span><br><span class="line">	 * @return 格式正确则返回对应的java.util.Date对象 格式错误返回null</span><br><span class="line">	 */</span><br><span class="line">	public static Date formatUnknownString2Date(String dateString) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			if (StringTools.isNullOrEmpty(dateString)) &#123;</span><br><span class="line">				return null;</span><br><span class="line">			&#125;</span><br><span class="line">			dateString = dateString.replace(&quot;T&quot;, &quot; &quot;);</span><br><span class="line">			String hms = &quot;00:00:00&quot;;</span><br><span class="line">			dateString = dateString.trim();</span><br><span class="line">			if (dateString.contains(&quot; &quot;)) &#123;</span><br><span class="line">				// 截取时分秒</span><br><span class="line">				hms = dateString.substring(dateString.indexOf(&quot; &quot;) + 1, dateString.length());</span><br><span class="line">				// 重置日期</span><br><span class="line">				dateString = dateString.substring(0, dateString.indexOf(&quot; &quot;));</span><br><span class="line">				// 多中分隔符的支持</span><br><span class="line">				hms = hms.replace(&quot;：&quot;, &quot;:&quot;);</span><br><span class="line">				hms = hms.replace(&quot;时&quot;, &quot;:&quot;);</span><br><span class="line">				hms = hms.replace(&quot;分&quot;, &quot;:&quot;);</span><br><span class="line">				hms = hms.replace(&quot;秒&quot;, &quot;:&quot;);</span><br><span class="line">				hms = hms.replace(&quot;-&quot;, &quot;:&quot;);</span><br><span class="line">				hms = hms.replace(&quot;－&quot;, &quot;:&quot;);</span><br><span class="line">				// 时间不同精确度的支持</span><br><span class="line">				if (hms.endsWith(&quot;:&quot;)) &#123;</span><br><span class="line">					hms = hms.substring(0, hms.length() - 1);</span><br><span class="line">				&#125;</span><br><span class="line">				if (hms.split(&quot;:&quot;).length == 1) &#123;</span><br><span class="line">					hms += &quot;:00:00&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">				if (hms.split(&quot;:&quot;).length == 2) &#123;</span><br><span class="line">					hms += &quot;:00&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			String[] hmsarr = hms.split(&quot;:&quot;);</span><br><span class="line">			// 不同日期分隔符的支持</span><br><span class="line">			dateString = dateString.replace(&quot;.&quot;, &quot;-&quot;);</span><br><span class="line">			dateString = dateString.replace(&quot;/&quot;, &quot;-&quot;);</span><br><span class="line">			dateString = dateString.replace(&quot;－&quot;, &quot;-&quot;);</span><br><span class="line">			dateString = dateString.replace(&quot;年&quot;, &quot;-&quot;);</span><br><span class="line">			dateString = dateString.replace(&quot;月&quot;, &quot;-&quot;);</span><br><span class="line">			dateString = dateString.replace(&quot;日&quot;, &quot;&quot;);</span><br><span class="line">			// 切割年月日</span><br><span class="line">			String yearStr, monthStr, dateStr;</span><br><span class="line">			// 截取日期</span><br><span class="line">			String[] ymd = dateString.split(&quot;-&quot;);</span><br><span class="line">			// 判断日期精确度</span><br><span class="line">			yearStr = ymd[0];</span><br><span class="line">			monthStr = ymd.length &gt; 1 ? ymd[1] : &quot;&quot;;</span><br><span class="line">			dateStr = ymd.length &gt; 2 ? ymd[2] : &quot;&quot;;</span><br><span class="line">			monthStr = monthStr == &quot;&quot; ? Integer.toString(1) : monthStr;</span><br><span class="line">			dateStr = dateStr == &quot;&quot; ? Integer.toString(1) : dateStr;</span><br><span class="line"></span><br><span class="line">			String dtr = (yearStr + &quot;-&quot; + formatDateSplit(monthStr) + &quot;-&quot; + formatDateSplit(dateStr) + &quot; &quot; + hms);</span><br><span class="line">			if (!dtr.matches(REG_EXP_DATE))</span><br><span class="line">				return null;</span><br><span class="line">			// 返回日期</span><br><span class="line">			return new DateTime(Integer.parseInt(yearStr.trim()), Integer.parseInt(monthStr.trim()),</span><br><span class="line">					Integer.parseInt(dateStr.trim()), Integer.parseInt(hmsarr[0].trim()),</span><br><span class="line">					Integer.parseInt(hmsarr[1].trim()), Integer.parseInt(hmsarr[2].trim()), 0).toDate();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private static String formatDateSplit(String md) &#123;</span><br><span class="line">		if (StringTools.isInt(md)) &#123;</span><br><span class="line">			if (StringTools.toInt(md) &lt; 10)</span><br><span class="line">				return &quot;0&quot;.concat(String.valueOf(StringTools.toInt(md)));</span><br><span class="line">		&#125;</span><br><span class="line">		return md;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 解析多个时间，指定时间之间的分隔符和时间的格式符 分隔符不能与格式符相同</span><br><span class="line">	 * @param dateString</span><br><span class="line">	 *            传入一个时间段字符串</span><br><span class="line">	 * @param spaceChar</span><br><span class="line">	 *            指定格式符</span><br><span class="line">	 * @param splitChar</span><br><span class="line">	 *            指定分隔符</span><br><span class="line">	 * @return 格式正确返回分割后的时间对象数组 格式错误返回null &lt;br&gt;</span><br><span class="line">	 *         指定了格式符为. 分隔符为- 返回值为 时间长度为2的Date类型数组&lt;br&gt;</span><br><span class="line">	 *         时间转换的方式详见</span><br><span class="line">	 *         &#123;@link DateTimeUtils#formatUnknownString2Date(String dateString)&#125;</span><br><span class="line">	 */</span><br><span class="line">	public static Date[] formatDatesByString(String dateString, String spaceChar, String splitChar) &#123;</span><br><span class="line">		if (spaceChar.equals(splitChar)) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">		String[] dateStrs = dateString.split(splitChar);</span><br><span class="line">		Date[] dates = new Date[dateStrs.length];</span><br><span class="line">		for (int i = 0, size = dateStrs.length; i &lt; size; i++) &#123;</span><br><span class="line">			dates[i] = formatUnknownString2Date(dateStrs[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		return dates;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 身份证号转生日</span><br><span class="line">	 * @param identityCard</span><br><span class="line">	 *            身份证</span><br><span class="line">	 * @return 生日</span><br><span class="line">	 */</span><br><span class="line">	public static Date identityCard2Date(String identityCard) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			String dateStr;</span><br><span class="line">			if (identityCard.length() == 18) &#123;</span><br><span class="line">				dateStr = identityCard.substring(6, 14);// 截取18位身份证身份证中生日部分</span><br><span class="line">				return formatDateString(dateStr, &quot;yyyyMMdd&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">			if (identityCard.length() == 15) &#123;</span><br><span class="line">				dateStr = identityCard.substring(6, 12);// 截取15位身份证中生日部分</span><br><span class="line">				return formatDateString(dateStr, &quot;yyMMdd&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">			return null;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static boolean validDate(String str) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Date date = formatUnknownString2Date(str);</span><br><span class="line">			return date != null;</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 计算加减秒数</span><br><span class="line">     * @param date</span><br><span class="line">     *            基础时间</span><br><span class="line">     * @param addSeconds</span><br><span class="line">     *            计算（+/-）秒数</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static Date calculateSecond(Date date, int addSeconds) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Calendar calendar = Calendar.getInstance();</span><br><span class="line">            calendar.setTime(date);</span><br><span class="line">            calendar.add(Calendar.SECOND, addSeconds);</span><br><span class="line">            return calendar.getTime();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 计算加减分钟数</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            基础时间</span><br><span class="line">	 * @param addMinutes</span><br><span class="line">	 *            计算（+/-）分钟数</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date calculateMinute(Date date, int addMinutes) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Calendar calendar = Calendar.getInstance();</span><br><span class="line">			calendar.setTime(date);</span><br><span class="line">			calendar.add(Calendar.MINUTE, addMinutes);</span><br><span class="line">			return calendar.getTime();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 计算加减天数</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            基础时间</span><br><span class="line">	 * @param addDays</span><br><span class="line">	 *            计算（+/-）天数</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date calculateDay(Date date, int addDays) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Calendar calendar = Calendar.getInstance();</span><br><span class="line">			calendar.setTime(date);</span><br><span class="line">			calendar.add(Calendar.DAY_OF_MONTH, addDays);</span><br><span class="line">			return calendar.getTime();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	/**</span><br><span class="line">	 * 计算加减年数</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            基础时间</span><br><span class="line">	 * @param addDays</span><br><span class="line">	 *            计算（+/-）年数</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date calculateYear(Date date, int addYears) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Calendar calendar = Calendar.getInstance();</span><br><span class="line">			calendar.setTime(date);</span><br><span class="line">			calendar.add(Calendar.YEAR, addYears);</span><br><span class="line">			return calendar.getTime();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 计算当前日期加减天数</span><br><span class="line">	 * @param addDays</span><br><span class="line">	 *            计算（+/-）天数</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date calculateDay(int addDays) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			return calculateDay(new Date(), addDays);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 计算月份加减</span><br><span class="line">	 * @param date</span><br><span class="line">	 *            基础时间</span><br><span class="line">	 * @param addMonths</span><br><span class="line">	 *            计算（+/-）月份数</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date calculateMonth(Date date, int addMonths) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Calendar calendar = Calendar.getInstance();</span><br><span class="line">			calendar.setTime(date);</span><br><span class="line">			calendar.add(Calendar.MONTH, addMonths);</span><br><span class="line">			return calendar.getTime();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取指定日期是周几，1代表周天，2代表周一，以此类推</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static int getDayOfWeek(Date date) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(date);</span><br><span class="line">		return calendar.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取指定日期是周几，0代表周一，1代表周二...6代表周日 中国版时间</span><br><span class="line">	 * @author hefan</span><br><span class="line">	 * @date 创建时间：2017年6月16日 下午2:47:40</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static int getDayOfWeekCN(Date date) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(date);</span><br><span class="line">		// 获取当前星期</span><br><span class="line">		return calendar.get(Calendar.DAY_OF_WEEK) == 1 ? 6 : calendar.get(Calendar.DAY_OF_WEEK) - 2;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取指定日期是一年中的第几周</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static String getWeekOfYear(Date date) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(date);</span><br><span class="line">		return formatNum(calendar.get(Calendar.WEEK_OF_YEAR));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取指定日期字符串是一年中的第几周 日期格式 “yyyy-MM-dd”</span><br><span class="line">	 * @param strDate</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static String getWeekOfYear(String strDate) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		Date curDate = formatDateString(strDate, YEAR_MONTH_DAY);</span><br><span class="line">		calendar.setTime(curDate);</span><br><span class="line">		return formatNum(calendar.get(Calendar.WEEK_OF_YEAR));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public static String getMonthofYear(String strDate) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		Date curDate = formatDateString(strDate, YEAR_MONTH_DAY);</span><br><span class="line">		calendar.setTime(curDate);</span><br><span class="line">		return String.valueOf(calendar.get(Calendar.YEAR) * 100 + calendar.get(Calendar.MONTH) + 1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 格式化int值为“xx”类型 2-&gt;&quot;02&quot;,12-&gt;&quot;12&quot;</span><br><span class="line">	 * @param num</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static String formatNum(int num) &#123;</span><br><span class="line">		if (num &lt; 0)</span><br><span class="line">			return &quot;&quot;;</span><br><span class="line">		return num &lt; 10 ? &quot;0&quot; + String.valueOf(num) : String.valueOf(num);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取指定日期当月第一天的日期</span><br><span class="line">	 * @param someDay</span><br><span class="line">	 *            制定日期</span><br><span class="line">	 * @param dayOfMonth</span><br><span class="line">	 *            当月的第几天</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date getSomeDayOfMonth(Date someDay, int dayOfMonth) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(someDay);</span><br><span class="line">		calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);</span><br><span class="line">		return calendar.getTime();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取本月的某一天日期日期</span><br><span class="line">	 * @param dayOfMonth</span><br><span class="line">	 *            当月的第几天</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date getSomeDayOfMonth(int dayOfMonth) &#123;</span><br><span class="line">		return getSomeDayOfMonth(new Date(), dayOfMonth);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取制定日期当周的周一</span><br><span class="line">	 * @param someDay</span><br><span class="line">	 *            制定日期</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date getFirstDayOfWeek(Date someDay) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(someDay);</span><br><span class="line">		calendar.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);</span><br><span class="line">		return calendar.getTime();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取制定日期前一个月，格式为yyyyMM的int值</span><br><span class="line">	 * @param someDay</span><br><span class="line">	 *            制定日期</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Integer getPrevYearDate(Date someDay) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(someDay);</span><br><span class="line">		calendar.set(Calendar.MONTH, -1);</span><br><span class="line">		return Integer.valueOf(format(calendar.getTime(), YEAR_MONTH_SIMPLE));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 根据传入日期获取日期所在周，yyyyMM格式 该方法是按照只要有一天在去年，那么日期就是去年的方式计算，与数据库函数获取的统一</span><br><span class="line">	 * @param someDay</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Integer getYearWeek(Date someDay) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		calendar.setTime(someDay);</span><br><span class="line">		calendar.setMinimalDaysInFirstWeek(7);</span><br><span class="line">		// 按照国际惯例，每天为每周第一天</span><br><span class="line">		calendar.setFirstDayOfWeek(Calendar.SUNDAY);</span><br><span class="line">		String week = DateTimeUtils.formatNum(calendar.get(Calendar.WEEK_OF_YEAR));</span><br><span class="line">		Date firstDayOfWeek = DateTimeUtils.getFirstDayOfWeek(someDay);</span><br><span class="line">		calendar.setTime(firstDayOfWeek);</span><br><span class="line">		int year = calendar.get(Calendar.YEAR);</span><br><span class="line">		return Integer.valueOf(year + week);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 根据年份周数获取当周第一天</span><br><span class="line">	 * @param yearWeek</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date getFirstDayByYearWeek(Integer yearWeek) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Calendar calendar = Calendar.getInstance();</span><br><span class="line">			calendar.setMinimalDaysInFirstWeek(7);</span><br><span class="line">			// 按照国际惯例，每天为每周第一天</span><br><span class="line">			calendar.setFirstDayOfWeek(Calendar.SUNDAY);</span><br><span class="line">			calendar.set(Calendar.WEEK_OF_YEAR, yearWeek % 100);</span><br><span class="line">			calendar.set(Calendar.YEAR, yearWeek / 100);</span><br><span class="line">			calendar.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);</span><br><span class="line">			return calendar.getTime();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取某一时间的零点时间</span><br><span class="line">	 * @date 2017年7月21日 上午11:13:37</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return 日期的零点日期；若参数为null则返回当天的零点日期</span><br><span class="line">	 */</span><br><span class="line">	public static Date getDateOnZero(Date date) &#123;</span><br><span class="line">		Calendar calendar = Calendar.getInstance();</span><br><span class="line">		if (date == null) &#123;</span><br><span class="line">			date = new Date();</span><br><span class="line">		&#125;</span><br><span class="line">		calendar.setTime(date);</span><br><span class="line">		calendar.set(Calendar.HOUR_OF_DAY, 0);</span><br><span class="line">		calendar.set(Calendar.MINUTE, 0);</span><br><span class="line">		calendar.set(Calendar.SECOND, 0);</span><br><span class="line">		calendar.set(Calendar.MILLISECOND, 0);</span><br><span class="line">		return calendar.getTime();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * convert date to corn</span><br><span class="line">	 * @date 2017/8/28 10:01</span><br><span class="line">     * @return corn表达式</span><br><span class="line">	 * @description</span><br><span class="line">	 */</span><br><span class="line">	public static String getCorn(Date date)&#123;</span><br><span class="line">        return format(date,SECOND_MINUTE_HOUR_DAY_MONTH_YEAR_CORN);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 判断2个时间的时间差 返回字符串形式</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @param date2</span><br><span class="line">	 * @return 字符串形式  如：</span><br><span class="line">	 *   1 天 2时 3分</span><br><span class="line">	 *   0时 0分 7秒</span><br><span class="line">	 */</span><br><span class="line">	public static String compareDate1WithDate2(Date date1, Date date2) &#123;</span><br><span class="line">		StringBuilder msg = new StringBuilder();</span><br><span class="line">		long ms = Math.abs(date1.getTime() - date2.getTime());</span><br><span class="line">		long day = ms / (24 * 60 * 60 * 1000);</span><br><span class="line">		if (day &lt;= 0)&#123;//返回时分秒</span><br><span class="line">			long hour = (ms / (60 * 60 * 1000) - day * 24);</span><br><span class="line">			long min = ((ms / (60 * 1000)) - day * 24 * 60 - hour * 60);</span><br><span class="line">			long s = (ms / 1000 - day * 24 * 60 * 60 - hour * 60 * 60 - min * 60);</span><br><span class="line">            msg.append(hour + &quot;小时&quot; + min +&quot;分&quot; + s + &quot;秒&quot;);</span><br><span class="line">		&#125;else&#123;//返回天时分</span><br><span class="line">			long hour = (ms / (60 * 60 * 1000) - day * 24);</span><br><span class="line">			long min = ((ms / (60 * 1000)) - day * 24 * 60 - hour * 60);</span><br><span class="line">			msg.append(day + &quot;天&quot; + hour + &quot;小时&quot; + min +&quot;分&quot; );</span><br><span class="line">		&#125;</span><br><span class="line">		return msg.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	final static String LAST_SECOND = &quot;23:59:59&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获取日期当天的最后一秒</span><br><span class="line">	 * @param date</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public static Date getLastSecond(Date date) &#123;</span><br><span class="line">		return formatDateString(format(date, YEAR_MONTH_DAY_SIMPLE) + LAST_SECOND,</span><br><span class="line">				YEAR_MONTH_DAY_HOUR_MINUTE_SECOND_SIMPLE);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * @description 年月日拼接上 23:59:59</span><br><span class="line">	 * @date 2018/1/8 15:34</span><br><span class="line">	 */</span><br><span class="line">	public static String getEndTime(String endTime) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">			format.parse(endTime);</span><br><span class="line">			if (!StringUtils.isEmpty(endTime))&#123;</span><br><span class="line">				return endTime = endTime.concat(&quot; 23:59:59&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;catch (Exception e) &#123;</span><br><span class="line">			throw new BusinessException(&quot;时间格式错误，required：yyyy-MM-dd，not ：&quot; + endTime);</span><br><span class="line">		&#125;</span><br><span class="line">		return endTime;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * dateBefore 格式为 20181012</span><br><span class="line">	 * 返回 2018-10-12</span><br><span class="line">	 */</span><br><span class="line">	public static String getTimeTransport(String dateBefore) &#123;</span><br><span class="line">		String year = dateBefore.substring(0,4);</span><br><span class="line">		String month = dateBefore.substring(4,6);</span><br><span class="line">		String day = dateBefore.substring(6);</span><br><span class="line">		return year+&quot;-&quot;+month+&quot;-&quot;+day;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/15/时间计算工具类/" data-id="cjoi96yxt000f6whx891kzzpa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-md-格式实例" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/14/md-格式实例/" class="article-date">
  <time datetime="2018-11-14T07:48:18.000Z" itemprop="datePublished">2018-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/14/md-格式实例/">md 格式实例</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="欢迎使用-Markdown在线编辑器-MdEditor"><a href="#欢迎使用-Markdown在线编辑器-MdEditor" class="headerlink" title="欢迎使用 Markdown在线编辑器 MdEditor"></a>欢迎使用 Markdown在线编辑器 MdEditor</h1><p>如需在线托管MarkDown文档，建议选择<a href="http://www.docrepository.org" title="MarkDown文档仓库" target="_blank" rel="noopener">文档仓库</a>，这是一个永久免费的中文文档在线管理工具，支持Markdown和富文本实时编辑预览，支持文档历史对比功能，支持私有文档和加密分享和本编辑器功能趋近。</p>
<p><strong>Markdown是一种轻量级的「标记语言」</strong></p>
<p><img src="http://www.mdeditor.com/images/logos/markdown.png" alt="markdown" title="markdown"></p>
<p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。它允许人们使用易读易写的纯文本格式编写文档，然后转换成格式丰富的HTML页面，Markdown文件的后缀名便是“.md”</p>
<h2 id="MdEditor是一个在线编辑Markdown文档的编辑器"><a href="#MdEditor是一个在线编辑Markdown文档的编辑器" class="headerlink" title="MdEditor是一个在线编辑Markdown文档的编辑器"></a>MdEditor是一个在线编辑Markdown文档的编辑器</h2><p><em>MdEditor扩展了Markdown的功能（如表格、脚注、内嵌HTML等等），以使让Markdown转换成更多的格式，和更丰富的展示效果，这些功能原初的Markdown尚不具备。</em></p>
<blockquote>
<p>Markdown增强版中比较有名的有Markdown Extra、MultiMarkdown、 Maruku等。这些衍生版本要么基于工具，如<del>Pandoc</del>，Pandao；要么基于网站，如GitHub和Wikipedia，在语法上基本兼容，但在一些语法和渲染效果上有改动。</p>
</blockquote>
<p>MdEditor源于Pandao的JavaScript开源项目，开源地址<a href="https://github.com/pandao/editor.md" title="Editor.md" target="_blank" rel="noopener">Editor.md</a>，并在MIT开源协议的许可范围内进行了优化，以适应广大用户群体的需求。向优秀的markdown开源编辑器原作者Pandao致敬。</p>
<p><img src="https://pandao.github.io/editor.md/images/logos/editormd-logo-180x180.png" alt="Pandao editor.md" title="Pandao editor.md"></p>
<h2 id="MdEditor的功能列表演示"><a href="#MdEditor的功能列表演示" class="headerlink" title="MdEditor的功能列表演示"></a>MdEditor的功能列表演示</h2><h1 id="标题H1"><a href="#标题H1" class="headerlink" title="标题H1"></a>标题H1</h1><h2 id="标题H2"><a href="#标题H2" class="headerlink" title="标题H2"></a>标题H2</h2><h3 id="标题H3"><a href="#标题H3" class="headerlink" title="标题H3"></a>标题H3</h3><h4 id="标题H4"><a href="#标题H4" class="headerlink" title="标题H4"></a>标题H4</h4><h5 id="标题H5"><a href="#标题H5" class="headerlink" title="标题H5"></a>标题H5</h5><h6 id="标题H5-1"><a href="#标题H5-1" class="headerlink" title="标题H5"></a>标题H5</h6><h3 id="字符效果和横线等"><a href="#字符效果和横线等" class="headerlink" title="字符效果和横线等"></a>字符效果和横线等</h3><hr>
<p><del>删除线</del> <s>删除线（开启识别HTML标签时）</s></p>
<p><em>斜体字</em>      <em>斜体字</em></p>
<p><strong>粗体</strong>  <strong>粗体</strong></p>
<p><strong><em>粗斜体</em></strong> <strong><em>粗斜体</em></strong></p>
<p>上标：X<sub>2</sub>，下标：O<sup>2</sup></p>
<p><strong>缩写(同HTML的abbr标签)</strong></p>
<blockquote>
<p>即更长的单词或短语的缩写形式，前提是开启识别HTML标签时，已默认开启</p>
</blockquote>
<p>The <abbr title="Hyper Text Markup Language">HTML</abbr> specification is maintained by the <abbr title="World Wide Web Consortium">W3C</abbr>.</p>
<h3 id="引用-Blockquotes"><a href="#引用-Blockquotes" class="headerlink" title="引用 Blockquotes"></a>引用 Blockquotes</h3><blockquote>
<p>引用文本 Blockquotes</p>
</blockquote>
<p>引用的行内混合 Blockquotes</p>
<blockquote>
<p>引用：如果想要插入空白换行<code>即&lt;br /&gt;标签</code>，在插入处先键入两个以上的空格然后回车即可，<a href="http://www.mdeditor.com/" target="_blank" rel="noopener">普通链接</a>。</p>
</blockquote>
<h3 id="锚点与链接-Links"><a href="#锚点与链接-Links" class="headerlink" title="锚点与链接 Links"></a>锚点与链接 Links</h3><p><a href="http://www.mdeditor.com/" target="_blank" rel="noopener">普通链接</a><br><a href="http://www.mdeditor.com/" title="普通链接带标题" target="_blank" rel="noopener">普通链接带标题</a><br>直接链接：<a href="http://www.mdeditor.com" target="_blank" rel="noopener">http://www.mdeditor.com</a><br>[锚点链接][anchor-id]<br>[anchor-id]: <a href="http://www.mdeditor.com/" target="_blank" rel="noopener">http://www.mdeditor.com/</a><br><a href="mailto:test.test@gmail.com" target="_blank" rel="noopener">mailto:test.test@gmail.com</a><br>GFM a-tail link @pandao<br>邮箱地址自动链接 <a href="mailto:test.test@gmail.com" target="_blank" rel="noopener">test.test@gmail.com</a>  <a href="mailto:www@vip.qq.com" target="_blank" rel="noopener">www@vip.qq.com</a></p>
<blockquote>
<p>@pandao</p>
</blockquote>
<h3 id="多语言代码高亮-Codes"><a href="#多语言代码高亮-Codes" class="headerlink" title="多语言代码高亮 Codes"></a>多语言代码高亮 Codes</h3><h4 id="行内代码-Inline-code"><a href="#行内代码-Inline-code" class="headerlink" title="行内代码 Inline code"></a>行内代码 Inline code</h4><p>执行命令：<code>npm install marked</code></p>
<h4 id="缩进风格"><a href="#缩进风格" class="headerlink" title="缩进风格"></a>缩进风格</h4><p>即缩进四个空格，也做为实现类似 <code>&lt;pre&gt;</code> 预格式化文本 ( Preformatted Text ) 的功能。</p>
<pre><code>&lt;?php
    echo &quot;Hello world!&quot;;
?&gt;
</code></pre><p>预格式化文本：</p>
<pre><code>| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |
</code></pre><h4 id="JS代码"><a href="#JS代码" class="headerlink" title="JS代码"></a>JS代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"Hello world!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="HTML-代码-HTML-codes"><a href="#HTML-代码-HTML-codes" class="headerlink" title="HTML 代码 HTML codes"></a>HTML 代码 HTML codes</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mate</span> <span class="attr">charest</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"Editor.md, Markdown, Editor"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            body&#123;font-size:14px;color:#444;font-family: "Microsoft Yahei", Tahoma, "Hiragino Sans GB", Arial;background:#fff;&#125;</span></span><br><span class="line"><span class="undefined">            ul&#123;list-style: none;&#125;</span></span><br><span class="line"><span class="undefined">            img&#123;border:none;vertical-align: middle;&#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"text-xxl"</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-green"</span>&gt;</span>Plain text<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="图片-Images"><a href="#图片-Images" class="headerlink" title="图片 Images"></a>图片 Images</h3><p>图片加链接 (Image + Link)：</p>
<p><a href="http://www.mdeditor.com/images/logos/markdown.png" title="markdown" target="_blank" rel="noopener"><img src="http://www.mdeditor.com/images/logos/markdown.png" alt=""></a></p>
<blockquote>
<p>Follow your heart.</p>
</blockquote>
<hr>
<h3 id="列表-Lists"><a href="#列表-Lists" class="headerlink" title="列表 Lists"></a>列表 Lists</h3><h4 id="无序列表（减号）Unordered-Lists"><a href="#无序列表（减号）Unordered-Lists" class="headerlink" title="无序列表（减号）Unordered Lists (-)"></a>无序列表（减号）Unordered Lists (-)</h4><ul>
<li>列表一</li>
<li>列表二</li>
<li>列表三</li>
</ul>
<h4 id="无序列表（星号）Unordered-Lists"><a href="#无序列表（星号）Unordered-Lists" class="headerlink" title="无序列表（星号）Unordered Lists (*)"></a>无序列表（星号）Unordered Lists (*)</h4><ul>
<li>列表一</li>
<li>列表二</li>
<li>列表三</li>
</ul>
<h4 id="无序列表（加号和嵌套）Unordered-Lists"><a href="#无序列表（加号和嵌套）Unordered-Lists" class="headerlink" title="无序列表（加号和嵌套）Unordered Lists (+)"></a>无序列表（加号和嵌套）Unordered Lists (+)</h4><ul>
<li>列表一</li>
<li>列表二<ul>
<li>列表二-1</li>
<li>列表二-2</li>
<li>列表二-3</li>
</ul>
</li>
<li>列表三<ul>
<li>列表一</li>
<li>列表二</li>
<li>列表三</li>
</ul>
</li>
</ul>
<h4 id="有序列表-Ordered-Lists"><a href="#有序列表-Ordered-Lists" class="headerlink" title="有序列表 Ordered Lists (-)"></a>有序列表 Ordered Lists (-)</h4><ol>
<li>第一行</li>
<li>第二行</li>
<li>第三行</li>
</ol>
<h4 id="GFM-task-list"><a href="#GFM-task-list" class="headerlink" title="GFM task list"></a>GFM task list</h4><ul>
<li style="list-style: none"><input type="checkbox" checked> GFM task list 1</li>
<li style="list-style: none"><input type="checkbox" checked> GFM task list 2</li>
<li style="list-style: none"><input type="checkbox"> GFM task list 3<ul>
<li style="list-style: none"><input type="checkbox"> GFM task list 3-1</li>
<li style="list-style: none"><input type="checkbox"> GFM task list 3-2</li>
<li style="list-style: none"><input type="checkbox"> GFM task list 3-3</li>
</ul>
</li>
<li style="list-style: none"><input type="checkbox"> GFM task list 4<ul>
<li style="list-style: none"><input type="checkbox"> GFM task list 4-1</li>
<li style="list-style: none"><input type="checkbox"> GFM task list 4-2</li>
</ul>
</li>
</ul>
<hr>
<h3 id="绘制表格-Tables"><a href="#绘制表格-Tables" class="headerlink" title="绘制表格 Tables"></a>绘制表格 Tables</h3><table>
<thead>
<tr>
<th>项目</th>
<th style="text-align:right">价格</th>
<th style="text-align:center">数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>计算机</td>
<td style="text-align:right">$1600</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>手机</td>
<td style="text-align:right">$12</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td>管线</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">234</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>First Header</th>
<th>Second Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
<tr>
<td>Content Cell</td>
<td>Content Cell</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Function name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>help()</code></td>
<td>Display the help window.</td>
</tr>
<tr>
<td><code>destroy()</code></td>
<td><strong>Destroy your computer!</strong></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">Left-Aligned</th>
<th style="text-align:center">Center Aligned</th>
<th style="text-align:right">Right Aligned</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">col 3 is</td>
<td style="text-align:center">some wordy text</td>
<td style="text-align:right">$1600</td>
</tr>
<tr>
<td style="text-align:left">col 2 is</td>
<td style="text-align:center">centered</td>
<td style="text-align:right">$12</td>
</tr>
<tr>
<td style="text-align:left">zebra stripes</td>
<td style="text-align:center">are neat</td>
<td style="text-align:right">$1</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Item</th>
<th style="text-align:right">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Computer</td>
<td style="text-align:right">$1600</td>
</tr>
<tr>
<td>Phone</td>
<td style="text-align:right">$12</td>
</tr>
<tr>
<td>Pipe</td>
<td style="text-align:right">$1</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="特殊符号-HTML-Entities-Codes"><a href="#特殊符号-HTML-Entities-Codes" class="headerlink" title="特殊符号 HTML Entities Codes"></a>特殊符号 HTML Entities Codes</h4><p>&copy; &amp;  &uml; &trade; &iexcl; &pound;<br>&amp; &lt; &gt; &yen; &euro; &reg; &plusmn; &para; &sect; &brvbar; &macr; &laquo; &middot;</p>
<p>X&sup2; Y&sup3; &frac34; &frac14;  &times;  &divide;   &raquo;</p>
<p>18&ordm;C  &quot;  &apos;</p>
<p>[========]</p>
<h3 id="Emoji表情-smiley"><a href="#Emoji表情-smiley" class="headerlink" title="Emoji表情 :smiley:"></a>Emoji表情 :smiley:</h3><blockquote>
<p>Blockquotes :star:</p>
</blockquote>
<h4 id="GFM-task-lists-amp-Emoji-amp-fontAwesome-icon-emoji-amp-editormd-logo-emoji-editormd-logo-5x"><a href="#GFM-task-lists-amp-Emoji-amp-fontAwesome-icon-emoji-amp-editormd-logo-emoji-editormd-logo-5x" class="headerlink" title="GFM task lists &amp; Emoji &amp; fontAwesome icon emoji &amp; editormd logo emoji :editormd-logo-5x:"></a>GFM task lists &amp; Emoji &amp; fontAwesome icon emoji &amp; editormd logo emoji :editormd-logo-5x:</h4><ul>
<li style="list-style: none"><input type="checkbox" checked> :smiley: @mentions, :smiley: #refs, <a href="">links</a>, <strong>formatting</strong>, and <del>tags</del> supported :editormd-logo:;</li>
<li style="list-style: none"><input type="checkbox" checked> list syntax required (any unordered or ordered list supported) :editormd-logo-3x:;</li>
<li style="list-style: none"><input type="checkbox" checked> [ ] :smiley: this is a complete item :smiley:;</li>
<li style="list-style: none"><input type="checkbox"> []this is an incomplete item <a href="#">test link</a> :fa-star: @pandao;</li>
<li style="list-style: none"><input type="checkbox"> [ ]this is an incomplete item :fa-star: :fa-gear:;<ul>
<li style="list-style: none"><input type="checkbox"> :smiley: this is an incomplete item <a href="#">test link</a> :fa-star: :fa-gear:;</li>
<li style="list-style: none"><input type="checkbox"> :smiley: this is  :fa-star: :fa-gear: an incomplete item <a href="#">test link</a>;</li>
</ul>
</li>
</ul>
<h4 id="反斜杠-Escape"><a href="#反斜杠-Escape" class="headerlink" title="反斜杠 Escape"></a>反斜杠 Escape</h4><p>*literal asterisks*</p>
<p>[========]</p>
<h3 id="科学公式-TeX-KaTeX"><a href="#科学公式-TeX-KaTeX" class="headerlink" title="科学公式 TeX(KaTeX)"></a>科学公式 TeX(KaTeX)</h3><p>$$E=mc^2$$</p>
<p>行内的公式$$E=mc^2$$行内的公式，行内的$$E=mc^2$$公式。</p>
<p>$$x &gt; y$$</p>
<p>$$(\sqrt{3x-1}+(1+x)^2)$$</p>
<p>$$\sin(\alpha)^{\theta}=\sum_{i=0}^{n}(x^i + \cos(f))$$</p>
<p>多行公式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\displaystyle</span><br><span class="line">\left( \sum\_&#123;k=1&#125;^n a\_k b\_k \right)^2</span><br><span class="line">\leq</span><br><span class="line">\left( \sum\_&#123;k=1&#125;^n a\_k^2 \right)</span><br><span class="line">\left( \sum\_&#123;k=1&#125;^n b\_k^2 \right)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">\displaystyle</span><br><span class="line">    \frac&#123;1&#125;&#123;</span><br><span class="line">        \Bigl(\sqrt&#123;\phi \sqrt&#123;5&#125;&#125;-\phi\Bigr) e^&#123;</span><br><span class="line">        \frac25 \pi&#125;&#125; = 1+\frac&#123;e^&#123;-2\pi&#125;&#125; &#123;1+\frac&#123;e^&#123;-4\pi&#125;&#125; &#123;</span><br><span class="line">        1+\frac&#123;e^&#123;-6\pi&#125;&#125;</span><br><span class="line">        &#123;1+\frac&#123;e^&#123;-8\pi&#125;&#125;</span><br><span class="line">         &#123;1+\cdots&#125; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f(x) = \int_&#123;-\infty&#125;^\infty</span><br><span class="line">    \hat f(\xi)\,e^&#123;2 \pi i \xi x&#125;</span><br><span class="line">    \,d\xi</span><br></pre></td></tr></table></figure>
<h3 id="分页符-Page-break"><a href="#分页符-Page-break" class="headerlink" title="分页符 Page break"></a>分页符 Page break</h3><blockquote>
<p>Print Test: Ctrl + P</p>
</blockquote>
<p>[========]</p>
<h3 id="绘制流程图-Flowchart"><a href="#绘制流程图-Flowchart" class="headerlink" title="绘制流程图 Flowchart"></a>绘制流程图 Flowchart</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: 用户登陆</span><br><span class="line">op=&gt;operation: 登陆操作</span><br><span class="line">cond=&gt;condition: 登陆成功 Yes or No?</span><br><span class="line">e=&gt;end: 进入后台</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>
<p>[========]</p>
<h3 id="绘制序列图-Sequence-Diagram"><a href="#绘制序列图-Sequence-Diagram" class="headerlink" title="绘制序列图 Sequence Diagram"></a>绘制序列图 Sequence Diagram</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Andrew-&gt;China: Says Hello</span><br><span class="line">Note right of China: China thinks\nabout it</span><br><span class="line">China--&gt;Andrew: How are you?</span><br><span class="line">Andrew-&gt;&gt;China: I am good thanks!</span><br></pre></td></tr></table></figure>
<h3 id="End"><a href="#End" class="headerlink" title="End"></a>End</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/14/md-格式实例/" data-id="cjoi96yxh00036whxt1zplata" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-字符串去空格" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/14/字符串去空格/" class="article-date">
  <time datetime="2018-11-14T07:41:23.000Z" itemprop="datePublished">2018-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/14/字符串去空格/">字符串去空格</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天，在做项目的时候会有字段校验的问题，传入一个String类型的字符串，如果要去除空格怎么办？<br>1.trim();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot; a d c &quot;;</span><br><span class="line">System.out.println(&quot;输出&quot;+s.length()); //7</span><br><span class="line">String s1 = s.trim();</span><br><span class="line">System.out.println(&quot;输出&quot;+s1.length());//5</span><br></pre></td></tr></table></figure></p>
<p>trim()方法 只会去除字符串的首尾空格<br>2.replaceAll();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot; a d c &quot;;</span><br><span class="line">System.out.println(&quot;输出&quot;+s.length()); //7</span><br><span class="line">String s1 = s.replaceAll(&quot; &quot;,&quot;&quot;);</span><br><span class="line">System.out.println(&quot;输出&quot;+s1.length());//3</span><br></pre></td></tr></table></figure></p>
<p>第一个参数是要被替换的内容  第二个参数是要被替换为的内容<br>3.正则表达式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot; a   d&quot; +</span><br><span class="line">               &quot;c &quot;;</span><br><span class="line">System.out.println(&quot;输出&quot;+s.length()); //8</span><br><span class="line">String s1 = s.replaceAll(&quot;\\s*&quot;,&quot;&quot;);</span><br><span class="line">System.out.println(&quot;输出&quot;+s1.length());//3</span><br></pre></td></tr></table></figure></p>
<p>利用正则表达式 可以去除制表符 空格 空白符</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/14/字符串去空格/" data-id="cjoi96yxk00056whxon952tjm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-idea使用git输入密码错误" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/31/idea使用git输入密码错误/" class="article-date">
  <time datetime="2018-10-31T01:26:42.000Z" itemprop="datePublished">2018-10-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/31/idea使用git输入密码错误/">idea使用git输入密码错误</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天，使用idea的git下载代码，第一遍输入的密码不对，但是再下载代码时一直报登录信息不正确，却不出现输入密码的地方，上网搜索了一下，得到这两条的解决办法，亲身试用。<br>1.到git的安装目录下打开CMD,执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --system --unset credential.helper</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/idea使用git输入密码错误/1.png" alt="1"><br>注意：这样会删除之前所保存的全部账户密码<br>2.打开控制面板–&gt;管理Windows凭证，选中用到的git网址凭证，点击删除，然后再次git clone 重新输入正确的用户名密码即可。<br><img src="/images/idea使用git输入密码错误/2.png" alt="2"><br><img src="/images/idea使用git输入密码错误/3.png" alt="3"><br><img src="/images/idea使用git输入密码错误/4.png" alt="4"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/31/idea使用git输入密码错误/" data-id="cjoi96yxo00096whxxonkifqa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-本地IDEA调试远程服务器程序" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/23/本地IDEA调试远程服务器程序/" class="article-date">
  <time datetime="2018-10-23T07:48:53.000Z" itemprop="datePublished">2018-10-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/23/本地IDEA调试远程服务器程序/">本地IDEA调试远程服务器程序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h2><p>首先，我们要让要让远程服务器支持远程调试功能，在项目启动项上追加特定的 JVM 参数即可，参数如下：<br>•   晚于 JDK 1.4.X 版本<br>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=4001<br>•    JDK 1.4.X 版本<br>-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=4001<br>•    JDK 1.3.X 或早起版本<br>-Xnoagent -Djava.compiler=NONE -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=4001<br>大家根据不同的 JDK 版本使用不同的启动参数即可。本人使用的是 Tomcat 7 + Java 7 ，在 catalina.bat（linux 环境设置 catalina.sh）中设置 JAVA_OPTS 节点即可，“address=4001” 中的 “4001”为调试端口，大家可以根据需求自行设置（友情提示：不要占用网站的端口，有可能会导致项目启动报错）。</p>
<h2 id="IDE-配置"><a href="#IDE-配置" class="headerlink" title="IDE 配置"></a>IDE 配置</h2><p>然后，配置一下客户端就可以啦，Idea 的客户端配置非常简单在如下图所示的位置：<br><img src="/images/本地IDEA调试远程服务器程序/1.png" alt="1"><br>点击 Edit Configurations，即可进入 Run/Debug Configurations 界面:<br><img src="/images/本地IDEA调试远程服务器程序/2.png" alt="2"><br>点击左上角的“+”标识，可以在下拉框中发现“Remote”选项，选择确定后，出现右侧区域，首先在HOST（标注2）框中配置需要调试的远程服务器地址，然后在调试端口狂（标注3）中调试端口号（这里的端口号和服务器端的端口号保持一致，本示例中是“4001”），点击 OK 即可。</p>
<h2 id="调试步骤"><a href="#调试步骤" class="headerlink" title="调试步骤"></a>调试步骤</h2><p>最后，进入调试流程，整个项目的调试也非常简单，点击下图中的 debug 按钮，当 console 窗口中打印出 “Connected to the target VM, address: 127.0.0.1:4001’, transport: ‘socket’”即表示链接成功：<br><img src="/images/本地IDEA调试远程服务器程序/3.png" alt="3"><br>当然啦，也会有不顺利的情况出现，如：<br>•    服务器端口限制，比如服务器屏蔽了“4001”端口，会导致远程调试失败；<br>•    本地代码和远程代码不一致，也会导致远程代码调试失败；</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/23/本地IDEA调试远程服务器程序/" data-id="cjoi96yxu000h6whxkptso2sc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-本地Eclipse调试远程服务器程序" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/23/本地Eclipse调试远程服务器程序/" class="article-date">
  <time datetime="2018-10-23T03:38:58.000Z" itemprop="datePublished">2018-10-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/23/本地Eclipse调试远程服务器程序/">本地Eclipse调试远程服务器程序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-远程服务器：Java程序执行脚本添加配置"><a href="#1-远程服务器：Java程序执行脚本添加配置" class="headerlink" title="1.    远程服务器：Java程序执行脚本添加配置"></a>1.    远程服务器：Java程序执行脚本添加配置</h2><p><img src="/images/本地Eclipse调试远程服务器程序/eclipse1.png" alt="eclipse1"><br>-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=54321<br>注意：address指向端口必须不同于原程序端口，让JVM可以区分调试和正常程序。使用docker的程序，需注意将调试端口暴露和映射出来。<br><a href="https://blog.csdn.net/lantian0802/article/details/40299377" target="_blank" rel="noopener">Java远程调试 java -Xdebug各参数说明</a></p>
<h2 id="2-本地：Eclipse配置"><a href="#2-本地：Eclipse配置" class="headerlink" title="2.    本地：Eclipse配置"></a>2.    本地：Eclipse配置</h2><p><img src="/images/本地Eclipse调试远程服务器程序/eclipse2.png" alt="eclipse2"><br><img src="/images/本地Eclipse调试远程服务器程序/eclipse3.png" alt="eclipse3"><br><img src="/images/本地Eclipse调试远程服务器程序/eclipse4.png" alt="eclipse4"> </p>
<h2 id="3-点击上图Debug按钮开始调试，远程系统的运行会反应在debug-pannel和断点上："><a href="#3-点击上图Debug按钮开始调试，远程系统的运行会反应在debug-pannel和断点上：" class="headerlink" title="3.   点击上图Debug按钮开始调试，远程系统的运行会反应在debug pannel和断点上："></a>3.   点击上图Debug按钮开始调试，远程系统的运行会反应在debug pannel和断点上：</h2><p><img src="/images/本地Eclipse调试远程服务器程序/eclipse5.png" alt="eclipse5"><br><img src="/images/本地Eclipse调试远程服务器程序/eclipse6.png" alt="eclipse6"> </p>
<h2 id="4-断开远程调试，按Disconnect"><a href="#4-断开远程调试，按Disconnect" class="headerlink" title="4.   断开远程调试，按Disconnect"></a>4.   断开远程调试，按Disconnect</h2><p><img src="/images/本地Eclipse调试远程服务器程序/eclipse7.png" alt="eclipse7"> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/23/本地Eclipse调试远程服务器程序/" data-id="cjoi96yxu000g6whxf1y87zqi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Sql中and、or、union、union-all-的用法" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/23/Sql中and、or、union、union-all-的用法/" class="article-date">
  <time datetime="2018-10-23T03:21:03.000Z" itemprop="datePublished">2018-10-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/23/Sql中and、or、union、union-all-的用法/">Sql中and、or、union、union all 的用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>And 是“和、并且”的意思<br>Or 是 “或者” 的意思<br>Union 与 union all 是 “联合” 的意思 区别为 union 去重 union all 不去重<br>举个例子：<br>    设计一张表 student<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `student` (</span><br><span class="line">  `id` int(10) NOT NULL AUTO_INCREMENT COMMENT &apos;主键&apos;,</span><br><span class="line">  `name` varchar(10) DEFAULT NULL COMMENT &apos;姓名&apos;,</span><br><span class="line">  `sex` varchar(5) DEFAULT NULL COMMENT &apos;性别&apos;,</span><br><span class="line">  `age` int(5) DEFAULT NULL COMMENT &apos;年龄&apos;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure></p>
<p>添加数据如图：<br><img src="/images/Sql中and_or_union_union_all 的用法/数据图.png" alt="数据图"></p>
<ol>
<li>and 用法<br>挑选性别是男并且年龄为30岁的姓名<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SQL：</span><br><span class="line">   	Select s.name from student s where sex = &apos;男&apos; and age = 30</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/images/Sql中and_or_union_union_all 的用法/and结果图.png" alt="and结果图"></p>
<ol start="2">
<li>or 用法<br>挑选年龄为22 或 30 的人<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SQL：</span><br><span class="line">	Select s.name from student s where age = 22 or age = 30</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/images/Sql中and_or_union_union_all 的用法/or结果图.png" alt="or结果图"></p>
<ol start="3">
<li>union 用法 </li>
<li>union all 用法<br>是联合查询 union 是A 条件的结果加上B条件的结果去重<br>Union all 是A 条件的结果加上B条件的结果 不去重 与or 相似</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/23/Sql中and、or、union、union-all-的用法/" data-id="cjoi96yx900016whxzawkngq3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful-API/">RESTful API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idea/">idea</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pageHelper-分页应用/">pageHelper 分页应用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器restart-sh脚本中的含义/">服务器restart.sh脚本中的含义</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/用命令行把项目部署到github/">用命令行把项目部署到github</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/RESTful-API/" style="font-size: 10px;">RESTful API</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/pageHelper-分页应用/" style="font-size: 10px;">pageHelper 分页应用</a> <a href="/tags/服务器restart-sh脚本中的含义/" style="font-size: 10px;">服务器restart.sh脚本中的含义</a> <a href="/tags/用命令行把项目部署到github/" style="font-size: 10px;">用命令行把项目部署到github</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/15/附件上传/">附件上传</a>
          </li>
        
          <li>
            <a href="/2018/11/15/邮件解析/">邮件解析</a>
          </li>
        
          <li>
            <a href="/2018/11/15/手机号-固话-身份证-校验/">手机号 固话 身份证 校验</a>
          </li>
        
          <li>
            <a href="/2018/11/15/时间计算工具类/">时间计算工具类</a>
          </li>
        
          <li>
            <a href="/2018/11/14/md-格式实例/">md 格式实例</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>